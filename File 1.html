<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.2">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">import React, { useState, useEffect, useRef } from 'react';</p>
<p class="p1">import { Building2, Users, FileText, Bell, Ticket, BarChart3, Search, Plus, ChevronRight, Home, LogOut, Calendar, Folder, MessageSquare, X, Save, Edit2, Trash2, Eye, Filter, Download, Upload } from 'lucide-react';</p>
<p class="p1">import { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';</p>
<p class="p2"><br></p>
<p class="p1">const RecuperoCrediti = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [currentUser, setCurrentUser] = useState(null);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [currentView, setCurrentView] = useState('dashboard');</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [selectedPratica, setSelectedPratica] = useState(null);</p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
<p class="p1"><span class="Apple-converted-space">  </span>const [clienti, setClienti] = useState([]);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [debitori, setDebitori] = useState([]);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [pratiche, setPratiche] = useState([]);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [alerts, setAlerts] = useState([]);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [tickets, setTickets] = useState([]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const [showModal, setShowModal] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [modalType, setModalType] = useState('');</p>
<p class="p1"><span class="Apple-converted-space">  </span>const [editingItem, setEditingItem] = useState(null);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>loadData();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}, []);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const loadData = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>try {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const clientiData = await window.storage.get('clienti');</p>
<p class="p1"><span class="Apple-converted-space">      </span>const debitoriData = await window.storage.get('debitori');</p>
<p class="p1"><span class="Apple-converted-space">      </span>const praticheData = await window.storage.get('pratiche');</p>
<p class="p1"><span class="Apple-converted-space">      </span>const alertsData = await window.storage.get('alerts');</p>
<p class="p1"><span class="Apple-converted-space">      </span>const ticketsData = await window.storage.get('tickets');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (clientiData) setClienti(JSON.parse(clientiData.value));</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (debitoriData) setDebitori(JSON.parse(debitoriData.value));</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (praticheData) setPratiche(JSON.parse(praticheData.value));</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (alertsData) setAlerts(JSON.parse(alertsData.value));</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (ticketsData) setTickets(JSON.parse(ticketsData.value));</p>
<p class="p1"><span class="Apple-converted-space">    </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>console.log('Inizializzazione nuova installazione');</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const saveData = async (type, data) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>try {</p>
<p class="p1"><span class="Apple-converted-space">      </span>await window.storage.set(type, JSON.stringify(data));</p>
<p class="p1"><span class="Apple-converted-space">    </span>} catch (error) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>console.error('Errore salvataggio:', error);</p>
<p class="p1"><span class="Apple-converted-space">      </span>alert('Errore nel salvataggio dei dati');</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleLogin = (tipo) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const user = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>tipo: tipo,</p>
<p class="p1"><span class="Apple-converted-space">      </span>nome: tipo === 'studio' ? 'Iorlano&amp;Partners' : 'Società Cliente',</p>
<p class="p1"><span class="Apple-converted-space">      </span>ruolo: tipo === 'studio' ? 'admin' : 'cliente'</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>setCurrentUser(user);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setCurrentView('dashboard');</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const handleLogout = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>setCurrentUser(null);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setCurrentView('dashboard');</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const addCliente = async (cliente) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuovoCliente = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>...cliente,</p>
<p class="p1"><span class="Apple-converted-space">      </span>id: Date.now().toString(),</p>
<p class="p1"><span class="Apple-converted-space">      </span>dataCreazione: new Date().toISOString()</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuoviClienti = [...clienti, nuovoCliente];</p>
<p class="p1"><span class="Apple-converted-space">    </span>setClienti(nuoviClienti);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('clienti', nuoviClienti);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const updateCliente = async (cliente) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuoviClienti = clienti.map(c =&gt; c.id === cliente.id ? cliente : c);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setClienti(nuoviClienti);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('clienti', nuoviClienti);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const deleteCliente = async (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (confirm('Sei sicuro di voler eliminare questo cliente?')) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuoviClienti = clienti.filter(c =&gt; c.id !== id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setClienti(nuoviClienti);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('clienti', nuoviClienti);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const addDebitore = async (debitore) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuovoDebitore = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>...debitore,</p>
<p class="p1"><span class="Apple-converted-space">      </span>id: Date.now().toString(),</p>
<p class="p1"><span class="Apple-converted-space">      </span>dataCreazione: new Date().toISOString()</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuoviDebitori = [...debitori, nuovoDebitore];</p>
<p class="p1"><span class="Apple-converted-space">    </span>setDebitori(nuoviDebitori);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('debitori', nuoviDebitori);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const updateDebitore = async (debitore) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuoviDebitori = debitori.map(d =&gt; d.id === debitore.id ? debitore : d);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setDebitori(nuoviDebitori);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('debitori', nuoviDebitori);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const deleteDebitore = async (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (confirm('Sei sicuro di voler eliminare questo debitore?')) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuoviDebitori = debitori.filter(d =&gt; d.id !== id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setDebitori(nuoviDebitori);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('debitori', nuoviDebitori);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const addPratica = async (pratica) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuovaPratica = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>...pratica,</p>
<p class="p1"><span class="Apple-converted-space">      </span>id: Date.now().toString(),</p>
<p class="p1"><span class="Apple-converted-space">      </span>dataCreazione: new Date().toISOString(),</p>
<p class="p1"><span class="Apple-converted-space">      </span>fase: 'Analisi preliminare',</p>
<p class="p1"><span class="Apple-converted-space">      </span>stato: 'in_corso',</p>
<p class="p1"><span class="Apple-converted-space">      </span>storico: [],</p>
<p class="p1"><span class="Apple-converted-space">      </span>documenti: [],</p>
<p class="p1"><span class="Apple-converted-space">      </span>messaggi: []</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuovePratiche = [...pratiche, nuovaPratica];</p>
<p class="p1"><span class="Apple-converted-space">    </span>setPratiche(nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('pratiche', nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const updatePratica = async (pratica) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuovePratiche = pratiche.map(p =&gt; p.id === pratica.id ? pratica : p);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setPratiche(nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('pratiche', nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const deletePratica = async (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (confirm('Sei sicuro di voler eliminare questa pratica?')) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuovePratiche = pratiche.filter(p =&gt; p.id !== id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setPratiche(nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('pratiche', nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const addAlert = async (alert) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuovoAlert = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>...alert,</p>
<p class="p1"><span class="Apple-converted-space">      </span>id: Date.now().toString(),</p>
<p class="p1"><span class="Apple-converted-space">      </span>dataCreazione: new Date().toISOString(),</p>
<p class="p1"><span class="Apple-converted-space">      </span>stato: 'in_gestione',</p>
<p class="p1"><span class="Apple-converted-space">      </span>messaggi: []</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuoviAlerts = [...alerts, nuovoAlert];</p>
<p class="p1"><span class="Apple-converted-space">    </span>setAlerts(nuoviAlerts);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('alerts', nuoviAlerts);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const updateAlert = async (alert) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuoviAlerts = alerts.map(a =&gt; a.id === alert.id ? alert : a);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setAlerts(nuoviAlerts);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('alerts', nuoviAlerts);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const deleteAlert = async (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (confirm('Sei sicuro di voler eliminare questo alert?')) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuoviAlerts = alerts.filter(a =&gt; a.id !== id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setAlerts(nuoviAlerts);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('alerts', nuoviAlerts);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const addTicket = async (ticket) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuovoTicket = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>...ticket,</p>
<p class="p1"><span class="Apple-converted-space">      </span>id: Date.now().toString(),</p>
<p class="p1"><span class="Apple-converted-space">      </span>dataCreazione: new Date().toISOString(),</p>
<p class="p1"><span class="Apple-converted-space">      </span>stato: 'aperto',</p>
<p class="p1"><span class="Apple-converted-space">      </span>messaggi: []</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuoviTickets = [...tickets, nuovoTicket];</p>
<p class="p1"><span class="Apple-converted-space">    </span>setTickets(nuoviTickets);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('tickets', nuoviTickets);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const updateTicket = async (ticket) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nuoviTickets = tickets.map(t =&gt; t.id === ticket.id ? ticket : t);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setTickets(nuoviTickets);</p>
<p class="p1"><span class="Apple-converted-space">    </span>await saveData('tickets', nuoviTickets);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setShowModal(false);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const deleteTicket = async (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (confirm('Sei sicuro di voler eliminare questo ticket?')) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuoviTickets = tickets.filter(t =&gt; t.id !== id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setTickets(nuoviTickets);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('tickets', nuoviTickets);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const LoginView = () =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="text-center mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="flex items-center justify-center mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;img<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">              </span>src="https://static.wixstatic.com/media/f70c33_e2a46a42e4784c4da86d7e8c2ad45f17~mv2.png/v1/fill/w_234,h_44,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/logo%20orizzontale%20-%20esteso.png"</p>
<p class="p1"><span class="Apple-converted-space">              </span>alt="Iorlano&amp;Partners"</p>
<p class="p1"><span class="Apple-converted-space">              </span>className="h-12"</p>
<p class="p1"><span class="Apple-converted-space">            </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;h1 className="text-3xl font-bold text-gray-900 mb-2"&gt;Recupero Crediti&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;p className="text-gray-600"&gt;Sistema di gestione pratiche legali&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; handleLogin('studio')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className="w-full bg-indigo-600 text-white py-4 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;Building2 size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span&gt;Accedi come Iorlano&amp;Partners&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p2"><span class="Apple-converted-space">          </span></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; handleLogin('cliente')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className="w-full bg-gray-600 text-white py-4 rounded-lg font-semibold hover:bg-gray-700 transition flex items-center justify-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;Users size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span&gt;Accedi come Società Cliente&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;p className="text-sm text-gray-500 text-center mt-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>Sistema protetto - Accesso riservato</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const Sidebar = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const menuItems = currentUser?.tipo === 'studio'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>? [</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'dashboard', label: 'Dashboard', icon: Home },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'clienti', label: 'Clienti', icon: Users },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'debitori', label: 'Debitori', icon: Building2 },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'pratiche', label: 'Pratiche', icon: FileText },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'alerts', label: 'Alert &amp; scadenze', icon: Bell },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'tickets', label: 'Tickets', icon: Ticket },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'statistiche', label: 'Statistiche', icon: BarChart3 },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'ricerca', label: 'Ricerca', icon: Search },</p>
<p class="p1"><span class="Apple-converted-space">        </span>]</p>
<p class="p1"><span class="Apple-converted-space">      </span>: [</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'dashboard', label: 'Dashboard', icon: Home },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'pratiche', label: 'Le mie pratiche', icon: FileText },</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ id: 'tickets', label: 'I miei tickets', icon: Ticket },</p>
<p class="p1"><span class="Apple-converted-space">        </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div style={{</p>
<p class="p1"><span class="Apple-converted-space">        </span>backgroundColor: '#312e81',</p>
<p class="p1"><span class="Apple-converted-space">        </span>color: 'white',</p>
<p class="p1"><span class="Apple-converted-space">        </span>width: '256px',</p>
<p class="p1"><span class="Apple-converted-space">        </span>minHeight: '100vh',</p>
<p class="p1"><span class="Apple-converted-space">        </span>padding: '1rem',</p>
<p class="p1"><span class="Apple-converted-space">        </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">        </span>flexDirection: 'column'</p>
<p class="p1"><span class="Apple-converted-space">      </span>}}&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div style={{ marginBottom: '2rem' }}&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div style={{</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">            </span>alignItems: 'center',</p>
<p class="p1"><span class="Apple-converted-space">            </span>justifyContent: 'center',</p>
<p class="p1"><span class="Apple-converted-space">            </span>marginBottom: '0.75rem',</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: '0.5rem'</p>
<p class="p1"><span class="Apple-converted-space">          </span>}}&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;img<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">              </span>src="https://static.wixstatic.com/media/f70c33_e2a46a42e4784c4da86d7e8c2ad45f17~mv2.png/v1/fill/w_234,h_44,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/logo%20orizzontale%20-%20esteso.png"</p>
<p class="p1"><span class="Apple-converted-space">              </span>alt="Iorlano&amp;Partners"</p>
<p class="p1"><span class="Apple-converted-space">              </span>style={{ height: '28px', width: 'auto', maxWidth: '100%', opacity: '0.9' }}</p>
<p class="p1"><span class="Apple-converted-space">              </span>onError={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>e.target.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                </span>e.target.parentElement.innerHTML = '&lt;div style="color: white; font-size: 1rem;"&gt;Iorlano&amp;Partners&lt;/div&gt;';</p>
<p class="p1"><span class="Apple-converted-space">              </span>}}</p>
<p class="p1"><span class="Apple-converted-space">            </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;p style={{</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: 'white',</p>
<p class="p1"><span class="Apple-converted-space">            </span>textAlign: 'left',</p>
<p class="p1"><span class="Apple-converted-space">            </span>fontSize: '0.875rem',</p>
<p class="p1"><span class="Apple-converted-space">            </span>fontWeight: 'bold',</p>
<p class="p1"><span class="Apple-converted-space">            </span>textTransform: 'uppercase',</p>
<p class="p1"><span class="Apple-converted-space">            </span>letterSpacing: '0.05em'</p>
<p class="p1"><span class="Apple-converted-space">          </span>}}&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Recupero crediti</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;nav style={{</p>
<p class="p1"><span class="Apple-converted-space">          </span>flex: 1,</p>
<p class="p1"><span class="Apple-converted-space">          </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">          </span>flexDirection: 'column',</p>
<p class="p1"><span class="Apple-converted-space">          </span>gap: '0.5rem'</p>
<p class="p1"><span class="Apple-converted-space">        </span>}}&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>{menuItems.map(item =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const Icon = item.icon;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const isActive = currentView === item.id;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>return (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>key={item.id}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setCurrentView(item.id);</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setSelectedPratica(null);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                </span>style={{</p>
<p class="p1"><span class="Apple-converted-space">                  </span>width: '100%',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>alignItems: 'center',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>gap: '0.75rem',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>padding: '0.75rem 1rem',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>borderRadius: '0.5rem',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>backgroundColor: isActive ? '#4338ca' : 'transparent',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>color: isActive ? 'white' : '#c7d2fe',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>border: 'none',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>cursor: 'pointer',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>transition: 'all 0.2s',</p>
<p class="p1"><span class="Apple-converted-space">                  </span>fontSize: '1rem'</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onMouseEnter={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>if (!isActive) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>e.currentTarget.style.backgroundColor = '#3730a3';</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onMouseLeave={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>if (!isActive) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>e.currentTarget.style.backgroundColor = 'transparent';</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Icon size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span&gt;{item.label}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>);</p>
<p class="p1"><span class="Apple-converted-space">          </span>})}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/nav&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">          </span>onClick={handleLogout}</p>
<p class="p1"><span class="Apple-converted-space">          </span>style={{</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: 'flex',</p>
<p class="p1"><span class="Apple-converted-space">            </span>alignItems: 'center',</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: '0.75rem',</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: '0.75rem 1rem',</p>
<p class="p1"><span class="Apple-converted-space">            </span>borderRadius: '0.5rem',</p>
<p class="p1"><span class="Apple-converted-space">            </span>backgroundColor: 'transparent',</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: '#c7d2fe',</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 'none',</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: 'pointer',</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: 'all 0.2s',</p>
<p class="p1"><span class="Apple-converted-space">            </span>marginTop: 'auto',</p>
<p class="p1"><span class="Apple-converted-space">            </span>fontSize: '1rem'</p>
<p class="p1"><span class="Apple-converted-space">          </span>}}</p>
<p class="p1"><span class="Apple-converted-space">          </span>onMouseEnter={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>e.currentTarget.style.backgroundColor = '#3730a3';</p>
<p class="p1"><span class="Apple-converted-space">          </span>}}</p>
<p class="p1"><span class="Apple-converted-space">          </span>onMouseLeave={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>e.currentTarget.style.backgroundColor = 'transparent';</p>
<p class="p1"><span class="Apple-converted-space">          </span>}}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;LogOut size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;span&gt;Esci&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const Dashboard = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheAperte = pratiche.filter(p =&gt; p.aperta).length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheChiuse = pratiche.filter(p =&gt; !p.aperta).length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheChiusePositive = pratiche.filter(p =&gt; !p.aperta &amp;&amp; p.esito === 'positivo').length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheChiuseNegative = pratiche.filter(p =&gt; !p.aperta &amp;&amp; p.esito === 'negativo').length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const alertAperti = alerts.filter(a =&gt; a.stato === 'in_gestione').length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const ticketsAperti = tickets.filter(t =&gt; t.stato === 'aperto').length;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleCapitale = pratiche.reduce((acc, p) =&gt; acc + (parseFloat(p.capitale) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleRecuperatoCapitale = pratiche.reduce((acc, p) =&gt; acc + (parseFloat(p.importoRecuperatoCapitale) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const capitaleDaRecuperare = totaleCapitale - totaleRecuperatoCapitale;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const percentualeRecuperoCapitale = totaleCapitale &gt; 0 ? (totaleRecuperatoCapitale / totaleCapitale * 100) : 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const percentualeCapitaleDaRecuperare = totaleCapitale &gt; 0 ? (capitaleDaRecuperare / totaleCapitale * 100) : 0;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleAnticipazioni = pratiche.reduce((acc, p) =&gt; acc + (parseFloat(p.anticipazioni) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleRecuperatoAnticipazioni = pratiche.reduce((acc, p) =&gt; acc + (parseFloat(p.importoRecuperatoAnticipazioni) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const percentualeRecuperoAnticipazioni = totaleAnticipazioni &gt; 0 ? (totaleRecuperatoAnticipazioni / totaleAnticipazioni * 100) : 0;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleCompensiMaturati = pratiche.reduce((acc, p) =&gt; acc + (parseFloat(p.compensiLegali) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleCompensiLiquidati = pratiche.reduce((acc, p) =&gt; acc + (parseFloat(p.compensiLiquidati) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const percentualeCompensiLiquidati = totaleCompensiMaturati &gt; 0 ? (totaleCompensiLiquidati / totaleCompensiMaturati * 100) : 0;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const totalePratiche = pratiche.length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const percPraticheAperte = totalePratiche &gt; 0 ? (praticheAperte / totalePratiche * 100) : 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const percPraticheChiusePositive = totalePratiche &gt; 0 ? (praticheChiusePositive / totalePratiche * 100) : 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const percPraticheChiuseNegative = totalePratiche &gt; 0 ? (praticheChiuseNegative / totalePratiche * 100) : 0;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1 className="text-3xl font-bold text-gray-900 mb-6"&gt;Dashboard&lt;/h1&gt;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6 border-l-4 border-blue-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex items-center justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-gray-600 text-sm"&gt;Pratiche aperte&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-3xl font-bold text-gray-900"&gt;{praticheAperte}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;FileText className="text-blue-500" size={32} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6 border-l-4 border-green-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex items-center justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-gray-600 text-sm"&gt;Pratiche chiuse&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-3xl font-bold text-gray-900"&gt;{praticheChiuse}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;FileText className="text-green-500" size={32} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6 border-l-4 border-orange-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex items-center justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-gray-600 text-sm"&gt;Alert attivi&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-3xl font-bold text-gray-900"&gt;{alertAperti}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;Bell className="text-orange-500" size={32} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6 border-l-4 border-purple-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex items-center justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-gray-600 text-sm"&gt;Tickets aperti&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-3xl font-bold text-gray-900"&gt;{ticketsAperti}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;Ticket className="text-purple-500" size={32} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="grid grid-cols-1 lg:grid-cols-2 gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-4"&gt;Riepilogo finanziario&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="pb-3 border-b"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex justify-between items-center mb-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-gray-600"&gt;Capitale totale affidato&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-xl font-bold text-gray-900"&gt;€ {totaleCapitale.toLocaleString('it-IT', {minimumFractionDigits: 2})}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex justify-between items-center mb-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-gray-600"&gt;Capitale recuperato&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-xl font-bold text-green-600"&gt;€ {totaleRecuperatoCapitale.toLocaleString('it-IT', {minimumFractionDigits: 2})}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-sm text-green-600 ml-2"&gt;({percentualeRecuperoCapitale.toFixed(1)}%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex justify-between items-center mt-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-gray-600 font-semibold"&gt;Capitale da recuperare&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-xl font-bold text-orange-600"&gt;€ {capitaleDaRecuperare.toLocaleString('it-IT', {minimumFractionDigits: 2})}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-sm text-orange-600 ml-2"&gt;({percentualeCapitaleDaRecuperare.toFixed(1)}%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="pb-3 border-b"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex justify-between items-center mb-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-gray-600"&gt;Importo anticipazioni&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-lg font-bold text-gray-900"&gt;€ {totaleAnticipazioni.toLocaleString('it-IT', {minimumFractionDigits: 2})}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-gray-600"&gt;Anticipazioni recuperate&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-lg font-bold text-green-600"&gt;€ {totaleRecuperatoAnticipazioni.toLocaleString('it-IT', {minimumFractionDigits: 2})}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-sm text-green-600 ml-2"&gt;({percentualeRecuperoAnticipazioni.toFixed(1)}%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex justify-between items-center mb-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-gray-600"&gt;Compensi maturati&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-lg font-bold text-gray-900"&gt;€ {totaleCompensiMaturati.toLocaleString('it-IT', {minimumFractionDigits: 2})}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-gray-600"&gt;Compensi liquidati&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-lg font-bold text-green-600"&gt;€ {totaleCompensiLiquidati.toLocaleString('it-IT', {minimumFractionDigits: 2})}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-sm text-green-600 ml-2"&gt;({percentualeCompensiLiquidati.toFixed(1)}%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-4"&gt;Performance&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex justify-between items-center pb-2 border-b"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span className="text-gray-700 font-medium"&gt;Pratiche totali&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span className="text-xl font-bold text-gray-900"&gt;{totalePratiche}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex justify-between items-center py-2 bg-blue-50 px-3 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span className="text-gray-700"&gt;Pratiche aperte&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-lg font-bold text-blue-700"&gt;{praticheAperte}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-sm text-blue-600 ml-2"&gt;({percPraticheAperte.toFixed(1)}%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex justify-between items-center py-2 bg-green-50 px-3 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span className="text-gray-700"&gt;Pratiche chiuse - esito positivo&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-lg font-bold text-green-700"&gt;{praticheChiusePositive}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-sm text-green-600 ml-2"&gt;({percPraticheChiusePositive.toFixed(1)}%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex justify-between items-center py-2 bg-red-50 px-3 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span className="text-gray-700"&gt;Pratiche chiuse - esito negativo&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-lg font-bold text-red-700"&gt;{praticheChiuseNegative}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-sm text-red-600 ml-2"&gt;({percPraticheChiuseNegative.toFixed(1)}%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const FormPraticaModal = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const formatoItalianoANumero = (valore) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!valore) return '0.00';</p>
<p class="p1"><span class="Apple-converted-space">      </span>const stringa = String(valore).replace(/\./g, '').replace(',', '.');</p>
<p class="p1"><span class="Apple-converted-space">      </span>return stringa;</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const numeroAFormatoItaliano = (valore) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!valore || valore === '0' || valore === '0.00') return '0,00';</p>
<p class="p1"><span class="Apple-converted-space">      </span>const numero = parseFloat(valore);</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (isNaN(numero)) return '0,00';</p>
<p class="p1"><span class="Apple-converted-space">      </span>return numero.toLocaleString('it-IT', { minimumFractionDigits: 2, maximumFractionDigits: 2 });</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getDefaultFormData = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (editingItem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>return {</p>
<p class="p1"><span class="Apple-converted-space">          </span>clienteId: editingItem.clienteId || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>debitoreId: editingItem.debitoreId || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>capitale: numeroAFormatoItaliano(editingItem.capitale || '0.00'),</p>
<p class="p1"><span class="Apple-converted-space">          </span>anticipazioni: numeroAFormatoItaliano(editingItem.anticipazioni || '0.00'),</p>
<p class="p1"><span class="Apple-converted-space">          </span>compensiLegali: numeroAFormatoItaliano(editingItem.compensiLegali || '0.00'),</p>
<p class="p1"><span class="Apple-converted-space">          </span>importoRecuperatoCapitale: numeroAFormatoItaliano(editingItem.importoRecuperatoCapitale || '0.00'),</p>
<p class="p1"><span class="Apple-converted-space">          </span>importoRecuperatoAnticipazioni: numeroAFormatoItaliano(editingItem.importoRecuperatoAnticipazioni || '0.00'),</p>
<p class="p1"><span class="Apple-converted-space">          </span>compensiLiquidati: numeroAFormatoItaliano(editingItem.compensiLiquidati || '0.00'),</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataAffidamento: editingItem.dataAffidamento || new Date().toISOString().split('T')[0],</p>
<p class="p1"><span class="Apple-converted-space">          </span>note: editingItem.note || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>esito: editingItem.esito || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>aperta: editingItem.aperta !== undefined ? editingItem.aperta : true</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>return {</p>
<p class="p1"><span class="Apple-converted-space">        </span>clienteId: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>debitoreId: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>capitale: '0,00',</p>
<p class="p1"><span class="Apple-converted-space">        </span>anticipazioni: '0,00',</p>
<p class="p1"><span class="Apple-converted-space">        </span>compensiLegali: '0,00',</p>
<p class="p1"><span class="Apple-converted-space">        </span>importoRecuperatoCapitale: '0,00',</p>
<p class="p1"><span class="Apple-converted-space">        </span>importoRecuperatoAnticipazioni: '0,00',</p>
<p class="p1"><span class="Apple-converted-space">        </span>compensiLiquidati: '0,00',</p>
<p class="p1"><span class="Apple-converted-space">        </span>dataAffidamento: new Date().toISOString().split('T')[0],</p>
<p class="p1"><span class="Apple-converted-space">        </span>note: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>esito: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>aperta: true</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const [formData, setFormData] = useState(getDefaultFormData());</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const [errori, setErrori] = useState({});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const handleNumeroFocus = (campo, valore) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (valore === '0,00' || valore === '0' || valore === '0.00') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setFormData({...formData, [campo]: ''});</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const handleNumeroBlur = (campo, valore) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!valore || valore.trim() === '') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>setFormData({...formData, [campo]: '0,00'});</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>const numeroConvertito = formatoItalianoANumero(valore);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const numeroFormattato = numeroAFormatoItaliano(numeroConvertito);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setFormData({...formData, [campo]: numeroFormattato});</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const handleSave = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuoviErrori = {};</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!formData.clienteId) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nuoviErrori.clienteId = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!formData.debitoreId) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nuoviErrori.debitoreId = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>setErrori(nuoviErrori);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (Object.keys(nuoviErrori).length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert('Compila tutti i campi obbligatori');</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const praticaDaSalvare = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>clienteId: formData.clienteId,</p>
<p class="p1"><span class="Apple-converted-space">        </span>debitoreId: formData.debitoreId,</p>
<p class="p1"><span class="Apple-converted-space">        </span>capitale: formatoItalianoANumero(formData.capitale),</p>
<p class="p1"><span class="Apple-converted-space">        </span>anticipazioni: formatoItalianoANumero(formData.anticipazioni),</p>
<p class="p1"><span class="Apple-converted-space">        </span>compensiLegali: formatoItalianoANumero(formData.compensiLegali),</p>
<p class="p1"><span class="Apple-converted-space">        </span>importoRecuperatoCapitale: formatoItalianoANumero(formData.importoRecuperatoCapitale),</p>
<p class="p1"><span class="Apple-converted-space">        </span>importoRecuperatoAnticipazioni: formatoItalianoANumero(formData.importoRecuperatoAnticipazioni),</p>
<p class="p1"><span class="Apple-converted-space">        </span>compensiLiquidati: formatoItalianoANumero(formData.compensiLiquidati),</p>
<p class="p1"><span class="Apple-converted-space">        </span>dataAffidamento: formData.dataAffidamento,</p>
<p class="p1"><span class="Apple-converted-space">        </span>note: formData.note,</p>
<p class="p1"><span class="Apple-converted-space">        </span>esito: formData.esito,</p>
<p class="p1"><span class="Apple-converted-space">        </span>aperta: formData.esito ? false : true</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (editingItem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>updatePratica({ ...praticaDaSalvare, id: editingItem.id });</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>addPratica(praticaDaSalvare);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div key={editingItem?.id || 'new'} className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6 border-b flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2 className="text-2xl font-bold text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{editingItem ? 'Modifica' : 'Nuova'} Pratica</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setShowModal(false)} className="text-gray-400 hover:text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;X size={24} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6 space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="grid grid-cols-2 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Cliente *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.clienteId}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setFormData({...formData, clienteId: e.target.value});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (errori.clienteId) setErrori({...errori, clienteId: false});</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${</p>
<p class="p1"><span class="Apple-converted-space">                    </span>errori.clienteId ? 'border-red-500 border-2' : 'border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value=""&gt;Seleziona cliente&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>{clienti.map(c =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option key={c.id} value={c.id}&gt;{c.ragioneSociale}&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>{errori.clienteId &amp;&amp; &lt;p className="text-red-500 text-sm mt-1"&gt;Campo obbligatorio&lt;/p&gt;}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Debitore *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.debitoreId}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setFormData({...formData, debitoreId: e.target.value});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (errori.debitoreId) setErrori({...errori, debitoreId: false});</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${</p>
<p class="p1"><span class="Apple-converted-space">                    </span>errori.debitoreId ? 'border-red-500 border-2' : 'border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value=""&gt;Seleziona debitore&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>{debitori.map(d =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option key={d.id} value={d.id}&gt;{d.ragioneSociale}&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>{errori.debitoreId &amp;&amp; &lt;p className="text-red-500 text-sm mt-1"&gt;Campo obbligatorio&lt;/p&gt;}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="border-t pt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-3"&gt;Dati finanziari&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="grid grid-cols-3 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Capitale (€)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={formData.capitale}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setFormData({...formData, capitale: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onFocus={(e) =&gt; handleNumeroFocus('capitale', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onBlur={(e) =&gt; handleNumeroBlur('capitale', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>placeholder="0,00"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Anticipazioni (€)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={formData.anticipazioni}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setFormData({...formData, anticipazioni: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onFocus={(e) =&gt; handleNumeroFocus('anticipazioni', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onBlur={(e) =&gt; handleNumeroBlur('anticipazioni', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>placeholder="0,00"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Compensi legali (€)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={formData.compensiLegali}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setFormData({...formData, compensiLegali: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onFocus={(e) =&gt; handleNumeroFocus('compensiLegali', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onBlur={(e) =&gt; handleNumeroBlur('compensiLegali', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>placeholder="0,00"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="grid grid-cols-3 gap-4 mt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Capitale recuperato (€)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={formData.importoRecuperatoCapitale}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setFormData({...formData, importoRecuperatoCapitale: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onFocus={(e) =&gt; handleNumeroFocus('importoRecuperatoCapitale', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onBlur={(e) =&gt; handleNumeroBlur('importoRecuperatoCapitale', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>placeholder="0,00"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Anticipazioni recuperate (€)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={formData.importoRecuperatoAnticipazioni}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setFormData({...formData, importoRecuperatoAnticipazioni: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onFocus={(e) =&gt; handleNumeroFocus('importoRecuperatoAnticipazioni', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onBlur={(e) =&gt; handleNumeroBlur('importoRecuperatoAnticipazioni', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>placeholder="0,00"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Compensi liquidati (€)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={formData.compensiLiquidati}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setFormData({...formData, compensiLiquidati: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onFocus={(e) =&gt; handleNumeroFocus('compensiLiquidati', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onBlur={(e) =&gt; handleNumeroBlur('compensiLiquidati', e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>placeholder="0,00"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="border-t pt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="grid grid-cols-2 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Data affidamento&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="date"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={formData.dataAffidamento}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setFormData({...formData, dataAffidamento: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Esito (solo se chiusa)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={formData.esito}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setFormData({...formData, esito: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value=""&gt;Pratica aperta&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="positivo"&gt;Esito positivo&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option value="negativo"&gt;Esito negativo&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Note&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;textarea</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.note}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; setFormData({...formData, note: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                </span>rows="3"</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">              </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex space-x-3 pt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={handleSave}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="flex-1 bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Save size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span&gt;Salva&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={() =&gt; setShowModal(false)}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-400 transition"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Annulla</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const FormAnagraficaModal = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const isCliente = modalType === 'cliente';</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [formData, setFormData] = useState(editingItem || {</p>
<p class="p1"><span class="Apple-converted-space">      </span>ragioneSociale: '',</p>
<p class="p1"><span class="Apple-converted-space">      </span>sedeLegale: '',</p>
<p class="p1"><span class="Apple-converted-space">      </span>sedeOperativa: '',</p>
<p class="p1"><span class="Apple-converted-space">      </span>tipologia: '',</p>
<p class="p1"><span class="Apple-converted-space">      </span>referente: '',</p>
<p class="p1"><span class="Apple-converted-space">      </span>email: '',</p>
<p class="p1"><span class="Apple-converted-space">      </span>telefono: '',</p>
<p class="p1"><span class="Apple-converted-space">      </span>pec: ''</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [errori, setErrori] = useState({});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const handleSave = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuoviErrori = {};</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!formData.ragioneSociale) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nuoviErrori.ragioneSociale = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>setErrori(nuoviErrori);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (Object.keys(nuoviErrori).length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert('Compila tutti i campi obbligatori');</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (editingItem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (isCliente) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>updateCliente({ ...formData, id: editingItem.id });</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">          </span>updateDebitore({ ...formData, id: editingItem.id });</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (isCliente) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>addCliente(formData);</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">          </span>addDebitore(formData);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6 border-b flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2 className="text-2xl font-bold text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{editingItem ? 'Modifica' : 'Nuovo'} {isCliente ? 'Cliente' : 'Debitore'}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setShowModal(false)} className="text-gray-400 hover:text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;X size={24} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6 space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Ragione sociale *</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.ragioneSociale}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setFormData({...formData, ragioneSociale: e.target.value});</p>
<p class="p1"><span class="Apple-converted-space">                  </span>if (errori.ragioneSociale) setErrori({...errori, ragioneSociale: false});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${</p>
<p class="p1"><span class="Apple-converted-space">                  </span>errori.ragioneSociale ? 'border-red-500 border-2' : 'border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">              </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{errori.ragioneSociale &amp;&amp; &lt;p className="text-red-500 text-sm mt-1"&gt;Campo obbligatorio&lt;/p&gt;}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="grid grid-cols-2 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Sede legale&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                  </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.sedeLegale}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; setFormData({...formData, sedeLegale: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Sede operativa&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                  </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.sedeOperativa}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; setFormData({...formData, sedeOperativa: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Tipologia&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.tipologia}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; setFormData({...formData, tipologia: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value=""&gt;Seleziona tipologia&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="impresa_individuale"&gt;Impresa Individuale&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="impresa_individuale_agricola"&gt;Impresa Individuale Agricola&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="srl"&gt;SRL&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="spa"&gt;SPA&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="scpa"&gt;SCPA&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="srl_agricola"&gt;SRL Agricola&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="snc"&gt;SNC&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="sas"&gt;SAS&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Referente&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.referente}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; setFormData({...formData, referente: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">              </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="grid grid-cols-2 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Email&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                  </span>type="email"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.email}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; setFormData({...formData, email: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;PEC&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                  </span>type="email"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.pec}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; setFormData({...formData, pec: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Telefono&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                </span>type="tel"</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.telefono}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; setFormData({...formData, telefono: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">              </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex space-x-3 pt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={handleSave}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="flex-1 bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Save size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span&gt;Salva&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={() =&gt; setShowModal(false)}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-400 transition"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Annulla</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const FormAlertModal = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const getDefaultFormData = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (editingItem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>return {</p>
<p class="p1"><span class="Apple-converted-space">          </span>praticaId: editingItem.praticaId || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>titolo: editingItem.titolo || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataScadenza: editingItem.dataScadenza || new Date().toISOString().split('T')[0],</p>
<p class="p1"><span class="Apple-converted-space">          </span>giorniPreavviso: editingItem.giorniPreavviso || '7',</p>
<p class="p1"><span class="Apple-converted-space">          </span>note: editingItem.note || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>stato: editingItem.stato || 'in_gestione'</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>return {</p>
<p class="p1"><span class="Apple-converted-space">        </span>praticaId: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>titolo: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>dataScadenza: new Date().toISOString().split('T')[0],</p>
<p class="p1"><span class="Apple-converted-space">        </span>giorniPreavviso: '7',</p>
<p class="p1"><span class="Apple-converted-space">        </span>note: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>stato: 'in_gestione'</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const [formData, setFormData] = useState(getDefaultFormData());</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [errori, setErrori] = useState({});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const handleSave = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuoviErrori = {};</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!formData.praticaId) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nuoviErrori.praticaId = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!formData.titolo) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nuoviErrori.titolo = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!formData.dataScadenza) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nuoviErrori.dataScadenza = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Verifica che la data non sia nel passato</p>
<p class="p1"><span class="Apple-converted-space">        </span>const dataInserita = new Date(formData.dataScadenza);</p>
<p class="p1"><span class="Apple-converted-space">        </span>dataInserita.setHours(0, 0, 0, 0);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const dataMinima = editingItem ? new Date(editingItem.dataCreazione) : new Date();</p>
<p class="p1"><span class="Apple-converted-space">        </span>dataMinima.setHours(0, 0, 0, 0);</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>if (dataInserita &lt; dataMinima) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>nuoviErrori.dataScadenza = true;</p>
<p class="p1"><span class="Apple-converted-space">          </span>nuoviErrori.dataScadenzaPassato = true;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>setErrori(nuoviErrori);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (Object.keys(nuoviErrori).length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (nuoviErrori.dataScadenzaPassato) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>alert('La data di scadenza non può essere nel passato');</p>
<p class="p1"><span class="Apple-converted-space">        </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">          </span>alert('Compila tutti i campi obbligatori');</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const alertDaSalvare = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>praticaId: formData.praticaId,</p>
<p class="p1"><span class="Apple-converted-space">        </span>titolo: formData.titolo,</p>
<p class="p1"><span class="Apple-converted-space">        </span>dataScadenza: formData.dataScadenza,</p>
<p class="p1"><span class="Apple-converted-space">        </span>giorniPreavviso: formData.giorniPreavviso,</p>
<p class="p1"><span class="Apple-converted-space">        </span>note: formData.note,</p>
<p class="p1"><span class="Apple-converted-space">        </span>stato: formData.stato</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (editingItem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>updateAlert({ ...alertDaSalvare, id: editingItem.id, messaggi: editingItem.messaggi || [], dataCreazione: editingItem.dataCreazione });</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>addAlert(alertDaSalvare);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6 border-b flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2 className="text-2xl font-bold text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{editingItem ? 'Modifica' : 'Nuovo'} Alert/Scadenza</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setShowModal(false)} className="text-gray-400 hover:text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;X size={24} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6 space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Pratica *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.praticaId}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setFormData({...formData, praticaId: e.target.value});</p>
<p class="p1"><span class="Apple-converted-space">                  </span>if (errori.praticaId) setErrori({...errori, praticaId: false});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${</p>
<p class="p1"><span class="Apple-converted-space">                  </span>errori.praticaId ? 'border-red-500 border-2' : 'border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value=""&gt;Seleziona pratica&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>{pratiche.map(p =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>const cliente = clienti.find(c =&gt; c.id === p.clienteId);</p>
<p class="p1"><span class="Apple-converted-space">                  </span>const debitore = debitori.find(d =&gt; d.id === p.debitoreId);</p>
<p class="p1"><span class="Apple-converted-space">                  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option key={p.id} value={p.id}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>{cliente?.ragioneSociale || 'N/D'} vs {debitore?.ragioneSociale || 'N/D'}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>);</p>
<p class="p1"><span class="Apple-converted-space">                </span>})}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{errori.praticaId &amp;&amp; &lt;p className="text-red-500 text-sm mt-1"&gt;Campo obbligatorio&lt;/p&gt;}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Titolo *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.titolo}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setFormData({...formData, titolo: e.target.value});</p>
<p class="p1"><span class="Apple-converted-space">                  </span>if (errori.titolo) setErrori({...errori, titolo: false});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                </span>placeholder="es. Scadenza deposito decreto"</p>
<p class="p1"><span class="Apple-converted-space">                </span>className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${</p>
<p class="p1"><span class="Apple-converted-space">                  </span>errori.titolo ? 'border-red-500 border-2' : 'border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">              </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{errori.titolo &amp;&amp; &lt;p className="text-red-500 text-sm mt-1"&gt;Campo obbligatorio&lt;/p&gt;}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="grid grid-cols-2 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Data scadenza *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                  </span>type="date"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.dataScadenza}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>min={editingItem ? editingItem.dataCreazione?.split('T')[0] : new Date().toISOString().split('T')[0]}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>setFormData({...formData, dataScadenza: e.target.value});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (errori.dataScadenza) setErrori({...errori, dataScadenza: false, dataScadenzaPassato: false});</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${</p>
<p class="p1"><span class="Apple-converted-space">                    </span>errori.dataScadenza ? 'border-red-500 border-2' : 'border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">                </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>{errori.dataScadenza &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;p className="text-red-500 text-sm mt-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{errori.dataScadenzaPassato ? 'La data non può essere nel passato' : 'Campo obbligatorio'}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>)}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Giorni preavviso&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                  </span>type="number"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>min="1"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>max="90"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.giorniPreavviso}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; setFormData({...formData, giorniPreavviso: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Stato&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.stato}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; setFormData({...formData, stato: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="in_gestione"&gt;In gestione&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value="chiuso"&gt;Chiuso&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Note&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;textarea</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.note}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; setFormData({...formData, note: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                </span>rows="3"</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">              </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex space-x-3 pt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={handleSave}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="flex-1 bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Save size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span&gt;Salva&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={() =&gt; setShowModal(false)}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-400 transition"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Annulla</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const FormTicketModal = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const getDefaultFormData = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (editingItem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>return {</p>
<p class="p1"><span class="Apple-converted-space">          </span>praticaId: editingItem.praticaId || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>oggetto: editingItem.oggetto || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>descrizione: editingItem.descrizione || '',</p>
<p class="p1"><span class="Apple-converted-space">          </span>priorita: editingItem.priorita || 'normale',</p>
<p class="p1"><span class="Apple-converted-space">          </span>categoria: editingItem.categoria || 'informazioni',</p>
<p class="p1"><span class="Apple-converted-space">          </span>stato: editingItem.stato || 'aperto'</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>return {</p>
<p class="p1"><span class="Apple-converted-space">        </span>praticaId: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>oggetto: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>descrizione: '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>priorita: 'normale',</p>
<p class="p1"><span class="Apple-converted-space">        </span>categoria: 'informazioni',</p>
<p class="p1"><span class="Apple-converted-space">        </span>stato: 'aperto'</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const [formData, setFormData] = useState(getDefaultFormData());</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [errori, setErrori] = useState({});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const handleSave = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuoviErrori = {};</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!formData.oggetto) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nuoviErrori.oggetto = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!formData.descrizione) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nuoviErrori.descrizione = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>setErrori(nuoviErrori);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (Object.keys(nuoviErrori).length &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert('Compila tutti i campi obbligatori');</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const ticketDaSalvare = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>praticaId: formData.praticaId,</p>
<p class="p1"><span class="Apple-converted-space">        </span>oggetto: formData.oggetto,</p>
<p class="p1"><span class="Apple-converted-space">        </span>descrizione: formData.descrizione,</p>
<p class="p1"><span class="Apple-converted-space">        </span>priorita: formData.priorita,</p>
<p class="p1"><span class="Apple-converted-space">        </span>categoria: formData.categoria,</p>
<p class="p1"><span class="Apple-converted-space">        </span>stato: formData.stato,</p>
<p class="p1"><span class="Apple-converted-space">        </span>autore: currentUser?.nome,</p>
<p class="p1"><span class="Apple-converted-space">        </span>autoreTipo: currentUser?.tipo</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (editingItem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>updateTicket({ ...ticketDaSalvare, id: editingItem.id, messaggi: editingItem.messaggi || [], dataCreazione: editingItem.dataCreazione });</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>addTicket(ticketDaSalvare);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div key={editingItem?.id || 'new'} className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6 border-b flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2 className="text-2xl font-bold text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{editingItem ? 'Modifica' : 'Nuovo'} Ticket</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setShowModal(false)} className="text-gray-400 hover:text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;X size={24} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6 space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Pratica collegata {currentUser?.tipo === 'cliente' &amp;&amp; '(opzionale)'}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.praticaId}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; setFormData({...formData, praticaId: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;option value=""&gt;Nessuna pratica specifica&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>{pratiche.map(p =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>const cliente = clienti.find(c =&gt; c.id === p.clienteId);</p>
<p class="p1"><span class="Apple-converted-space">                  </span>const debitore = debitori.find(d =&gt; d.id === p.debitoreId);</p>
<p class="p1"><span class="Apple-converted-space">                  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;option key={p.id} value={p.id}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>{cliente?.ragioneSociale || 'N/D'} vs {debitore?.ragioneSociale || 'N/D'}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>);</p>
<p class="p1"><span class="Apple-converted-space">                </span>})}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Oggetto *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.oggetto}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setFormData({...formData, oggetto: e.target.value});</p>
<p class="p1"><span class="Apple-converted-space">                  </span>if (errori.oggetto) setErrori({...errori, oggetto: false});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                </span>placeholder="es. Richiesta informazioni su stato pratica"</p>
<p class="p1"><span class="Apple-converted-space">                </span>className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${</p>
<p class="p1"><span class="Apple-converted-space">                  </span>errori.oggetto ? 'border-red-500 border-2' : 'border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">              </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{errori.oggetto &amp;&amp; &lt;p className="text-red-500 text-sm mt-1"&gt;Campo obbligatorio&lt;/p&gt;}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Descrizione *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;textarea</p>
<p class="p1"><span class="Apple-converted-space">                </span>value={formData.descrizione}</p>
<p class="p1"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setFormData({...formData, descrizione: e.target.value});</p>
<p class="p1"><span class="Apple-converted-space">                  </span>if (errori.descrizione) setErrori({...errori, descrizione: false});</p>
<p class="p1"><span class="Apple-converted-space">                </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                </span>rows="4"</p>
<p class="p1"><span class="Apple-converted-space">                </span>placeholder="Descrivi la tua richiesta..."</p>
<p class="p1"><span class="Apple-converted-space">                </span>className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${</p>
<p class="p1"><span class="Apple-converted-space">                  </span>errori.descrizione ? 'border-red-500 border-2' : 'border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">              </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{errori.descrizione &amp;&amp; &lt;p className="text-red-500 text-sm mt-1"&gt;Campo obbligatorio&lt;/p&gt;}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="grid grid-cols-2 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Categoria&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.categoria}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; setFormData({...formData, categoria: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="informazioni"&gt;Richiesta informazioni&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="documentazione"&gt;Documentazione&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="pagamenti"&gt;Pagamenti&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="problemi"&gt;Segnalazione problema&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="altro"&gt;Altro&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Priorità&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.priorita}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; setFormData({...formData, priorita: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="bassa"&gt;Bassa&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="normale"&gt;Normale&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="alta"&gt;Alta&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="urgente"&gt;Urgente&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Stato&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                  </span>value={formData.stato}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onChange={(e) =&gt; setFormData({...formData, stato: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="aperto"&gt;Aperto&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="in_lavorazione"&gt;In lavorazione&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="risolto"&gt;Risolto&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;option value="chiuso"&gt;Chiuso&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex space-x-3 pt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={handleSave}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="flex-1 bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center justify-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Save size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;span&gt;Salva&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                </span>onClick={() =&gt; setShowModal(false)}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-400 transition"</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Annulla</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const ClientiView = () =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="flex justify-between items-center mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1 className="text-3xl font-bold text-gray-900"&gt;Clienti&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">          </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>setModalType('cliente');</p>
<p class="p1"><span class="Apple-converted-space">            </span>setEditingItem(null);</p>
<p class="p1"><span class="Apple-converted-space">            </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">          </span>}}</p>
<p class="p1"><span class="Apple-converted-space">          </span>className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">        </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;Plus size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;span&gt;Nuovo cliente&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="bg-white rounded-lg shadow overflow-hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;table className="w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;thead className="bg-gray-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Ragione sociale&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Tipologia&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Referente&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Contatti&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"&gt;Azioni&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;tbody className="divide-y divide-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{clienti.map(cliente =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;tr key={cliente.id} className="hover:bg-gray-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 font-semibold text-gray-900"&gt;{cliente.ragioneSociale}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 text-gray-600"&gt;{cliente.tipologia}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 text-gray-600"&gt;{cliente.referente}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-sm"&gt;{cliente.email}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-sm text-gray-500"&gt;{cliente.telefono}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                      </span>setModalType('cliente');</p>
<p class="p1"><span class="Apple-converted-space">                      </span>setEditingItem(cliente);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="text-indigo-600 hover:text-indigo-800 mr-3"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;Edit2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onClick={() =&gt; deleteCliente(cliente.id)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="text-red-600 hover:text-red-800"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;Trash2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>))}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>{clienti.length === 0 &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="text-center py-12 text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Nessun cliente presente. Clicca su "Nuovo cliente" per iniziare.</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>)}</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const DebitoriView = () =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="flex justify-between items-center mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1 className="text-3xl font-bold text-gray-900"&gt;Debitori&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">          </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>setModalType('debitore');</p>
<p class="p1"><span class="Apple-converted-space">            </span>setEditingItem(null);</p>
<p class="p1"><span class="Apple-converted-space">            </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">          </span>}}</p>
<p class="p1"><span class="Apple-converted-space">          </span>className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">        </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;Plus size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;span&gt;Nuovo debitore&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="bg-white rounded-lg shadow overflow-hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;table className="w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;thead className="bg-gray-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Ragione sociale&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Tipologia&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Referente&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Contatti&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"&gt;Azioni&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;tbody className="divide-y divide-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{debitori.map(debitore =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;tr key={debitore.id} className="hover:bg-gray-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 font-semibold text-gray-900"&gt;{debitore.ragioneSociale}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 text-gray-600"&gt;{debitore.tipologia}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 text-gray-600"&gt;{debitore.referente}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-sm"&gt;{debitore.email}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-sm text-gray-500"&gt;{debitore.telefono}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;td className="px-6 py-4 text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                      </span>setModalType('debitore');</p>
<p class="p1"><span class="Apple-converted-space">                      </span>setEditingItem(debitore);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="text-indigo-600 hover:text-indigo-800 mr-3"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;Edit2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onClick={() =&gt; deleteDebitore(debitore.id)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="text-red-600 hover:text-red-800"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;Trash2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>))}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>{debitori.length === 0 &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="text-center py-12 text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Nessun debitore presente. Clicca su "Nuovo debitore" per iniziare.</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>)}</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const PraticheView = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const getClienteNome = (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const cliente = clienti.find(c =&gt; c.id === id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>return cliente ? cliente.ragioneSociale : 'N/D';</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getDebitoreNome = (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const debitore = debitori.find(d =&gt; d.id === id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>return debitore ? debitore.ragioneSociale : 'N/D';</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheVisibili = currentUser?.tipo === 'studio'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>? pratiche<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>: pratiche.filter(p =&gt; p.clienteId === currentUser?.clienteId);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="flex justify-between items-center mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;h1 className="text-3xl font-bold text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{currentUser?.tipo === 'studio' ? 'Pratiche' : 'Le mie pratiche'}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">              </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>setModalType('pratica');</p>
<p class="p1"><span class="Apple-converted-space">                </span>setEditingItem(null);</p>
<p class="p1"><span class="Apple-converted-space">                </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">              </span>}}</p>
<p class="p1"><span class="Apple-converted-space">              </span>className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">            </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;Plus size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;span&gt;Nuova pratica&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>)}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="bg-white rounded-lg shadow overflow-hidden"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;table className="w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;thead className="bg-gray-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Cliente&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Debitore&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Capitale&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Fase&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"&gt;Stato&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"&gt;Azioni&lt;/th&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/thead&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;tbody className="divide-y divide-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{praticheVisibili.map(pratica =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;tr key={pratica.id} className="hover:bg-gray-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;td className="px-6 py-4 font-semibold text-gray-900"&gt;{getClienteNome(pratica.clienteId)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;td className="px-6 py-4 text-gray-600"&gt;{getDebitoreNome(pratica.debitoreId)}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;td className="px-6 py-4 text-gray-900 font-medium"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>€ {parseFloat(pratica.capitale || 0).toLocaleString('it-IT', {minimumFractionDigits: 2})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;td className="px-6 py-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className="text-sm text-gray-700"&gt;{pratica.fase}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;td className="px-6 py-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span className={`px-2 py-1 text-xs font-semibold rounded-full ${</p>
<p class="p1"><span class="Apple-converted-space">                      </span>pratica.aperta<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>? 'bg-blue-100 text-blue-800'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>: pratica.esito === 'positivo'</p>
<p class="p1"><span class="Apple-converted-space">                        </span>? 'bg-green-100 text-green-800'</p>
<p class="p1"><span class="Apple-converted-space">                        </span>: 'bg-red-100 text-red-800'</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>{pratica.aperta ? 'Aperta' : pratica.esito === 'positivo' ? 'Chiusa positiva' : 'Chiusa negativa'}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;td className="px-6 py-4 text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                      </span>onClick={() =&gt; setSelectedPratica(pratica)}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>className="text-indigo-600 hover:text-indigo-800 mr-3"</p>
<p class="p1"><span class="Apple-converted-space">                      </span>title="Visualizza dettagli"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Eye size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                          </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setModalType('pratica');</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setEditingItem(pratica);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">                          </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>className="text-indigo-600 hover:text-indigo-800 mr-3"</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;Edit2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                          </span>onClick={() =&gt; deletePratica(pratica.id)}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>className="text-red-600 hover:text-red-800"</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;Trash2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/tr&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>))}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/tbody&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/table&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>{praticheVisibili.length === 0 &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="text-center py-12 text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{currentUser?.tipo === 'studio'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'Nessuna pratica presente. Clicca su "Nuova pratica" per iniziare.'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'Nessuna pratica assegnata al momento.'</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>)}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const TicketsView = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [filtroStato, setFiltroStato] = useState('tutti');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getPraticaNome = (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!id) return 'Richiesta generica';</p>
<p class="p1"><span class="Apple-converted-space">      </span>const pratica = pratiche.find(p =&gt; p.id === id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!pratica) return 'N/D';</p>
<p class="p1"><span class="Apple-converted-space">      </span>const cliente = clienti.find(c =&gt; c.id === pratica.clienteId);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const debitore = debitori.find(d =&gt; d.id === pratica.debitoreId);</p>
<p class="p1"><span class="Apple-converted-space">      </span>return `${cliente?.ragioneSociale || 'N/D'} vs ${debitore?.ragioneSociale || 'N/D'}`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getPrioritaColor = (priorita) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>switch(priorita) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'urgente': return 'border-red-500 bg-red-50';</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'alta': return 'border-orange-500 bg-orange-50';</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'normale': return 'border-blue-500 bg-blue-50';</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'bassa': return 'border-green-500 bg-green-50';</p>
<p class="p1"><span class="Apple-converted-space">        </span>default: return 'border-gray-500 bg-gray-50';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getPrioritaIconColor = (priorita) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>switch(priorita) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'urgente': return 'text-red-600';</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'alta': return 'text-orange-600';</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'normale': return 'text-blue-600';</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'bassa': return 'text-green-600';</p>
<p class="p1"><span class="Apple-converted-space">        </span>default: return 'text-gray-600';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const ticketsFiltrati = tickets.filter(t =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (filtroStato === 'tutti') return true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>return t.stato === filtroStato;</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const ticketsOrdinati = [...ticketsFiltrati].sort((a, b) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>return new Date(b.dataCreazione) - new Date(a.dataCreazione);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="flex justify-between items-center mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;h1 className="text-3xl font-bold text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{currentUser?.tipo === 'studio' ? 'Tickets' : 'I miei tickets'}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">              </span>setModalType('ticket');</p>
<p class="p1"><span class="Apple-converted-space">              </span>setEditingItem(null);</p>
<p class="p1"><span class="Apple-converted-space">              </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;Plus size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span&gt;Nuovo ticket&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="flex space-x-2 mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; setFiltroStato('tutti')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className={`px-4 py-2 rounded-lg font-medium text-sm transition ${</p>
<p class="p1"><span class="Apple-converted-space">              </span>filtroStato === 'tutti'</p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Tutti ({tickets.length})</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; setFiltroStato('aperto')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className={`px-4 py-2 rounded-lg font-medium text-sm transition ${</p>
<p class="p1"><span class="Apple-converted-space">              </span>filtroStato === 'aperto'</p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Aperti ({tickets.filter(t =&gt; t.stato === 'aperto').length})</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; setFiltroStato('in_lavorazione')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className={`px-4 py-2 rounded-lg font-medium text-sm transition ${</p>
<p class="p1"><span class="Apple-converted-space">              </span>filtroStato === 'in_lavorazione'</p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>In lavorazione ({tickets.filter(t =&gt; t.stato === 'in_lavorazione').length})</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; setFiltroStato('risolto')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className={`px-4 py-2 rounded-lg font-medium text-sm transition ${</p>
<p class="p1"><span class="Apple-converted-space">              </span>filtroStato === 'risolto'</p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Risolti ({tickets.filter(t =&gt; t.stato === 'risolto').length})</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; setFiltroStato('chiuso')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className={`px-4 py-2 rounded-lg font-medium text-sm transition ${</p>
<p class="p1"><span class="Apple-converted-space">              </span>filtroStato === 'chiuso'</p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Chiusi ({tickets.filter(t =&gt; t.stato === 'chiuso').length})</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="grid grid-cols-1 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>{ticketsOrdinati.length === 0 ? (</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="bg-white rounded-lg shadow p-8 text-center text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;Ticket className="mx-auto text-gray-400 mb-3" size={48} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;p className="text-lg mb-2"&gt;Nessun ticket presente&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;p className="text-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>Clicca su "Nuovo ticket" per creare una richiesta.</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">            </span>ticketsOrdinati.map(ticket =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div</p>
<p class="p1"><span class="Apple-converted-space">                </span>key={ticket.id}</p>
<p class="p1"><span class="Apple-converted-space">                </span>className={`bg-white rounded-lg shadow p-4 border-l-4 hover:shadow-lg transition ${getPrioritaColor(ticket.priorita)}`}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex items-start justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="flex-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="flex items-center space-x-3 mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Ticket<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>className={getPrioritaIconColor(ticket.priorita)}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>size={24}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;h3 className="text-lg font-semibold text-gray-900"&gt;{ticket.oggetto}&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span className={`px-2 py-1 text-xs font-semibold rounded-full ${</p>
<p class="p1"><span class="Apple-converted-space">                        </span>ticket.stato === 'aperto'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>? 'bg-blue-100 text-blue-800'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>: ticket.stato === 'in_lavorazione'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>? 'bg-yellow-100 text-yellow-800'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>: ticket.stato === 'risolto'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>? 'bg-green-100 text-green-800'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>: 'bg-gray-100 text-gray-800'</p>
<p class="p1"><span class="Apple-converted-space">                      </span>}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ticket.stato === 'aperto' ? 'Aperto' :<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                         </span>ticket.stato === 'in_lavorazione' ? 'In lavorazione' :</p>
<p class="p1"><span class="Apple-converted-space">                         </span>ticket.stato === 'risolto' ? 'Risolto' : 'Chiuso'}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p className="text-gray-700 mb-3"&gt;{ticket.descrizione}&lt;/p&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="flex flex-wrap gap-3 text-sm text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span className="flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;strong className="mr-1"&gt;Pratica:&lt;/strong&gt; {getPraticaNome(ticket.praticaId)}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span className="flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;strong className="mr-1"&gt;Categoria:&lt;/strong&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                          </span>ticket.categoria === 'informazioni' ? 'Informazioni' :</p>
<p class="p1"><span class="Apple-converted-space">                          </span>ticket.categoria === 'documentazione' ? 'Documentazione' :</p>
<p class="p1"><span class="Apple-converted-space">                          </span>ticket.categoria === 'pagamenti' ? 'Pagamenti' :</p>
<p class="p1"><span class="Apple-converted-space">                          </span>ticket.categoria === 'problemi' ? 'Problemi' : 'Altro'</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span className={`flex items-center font-semibold ${</p>
<p class="p1"><span class="Apple-converted-space">                        </span>ticket.priorita === 'urgente' ? 'text-red-600' :</p>
<p class="p1"><span class="Apple-converted-space">                        </span>ticket.priorita === 'alta' ? 'text-orange-600' :</p>
<p class="p1"><span class="Apple-converted-space">                        </span>ticket.priorita === 'normale' ? 'text-blue-600' : 'text-green-600'</p>
<p class="p1"><span class="Apple-converted-space">                      </span>}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;strong className="mr-1"&gt;Priorità:&lt;/strong&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                          </span>ticket.priorita === 'urgente' ? 'Urgente' :</p>
<p class="p1"><span class="Apple-converted-space">                          </span>ticket.priorita === 'alta' ? 'Alta' :</p>
<p class="p1"><span class="Apple-converted-space">                          </span>ticket.priorita === 'normale' ? 'Normale' : 'Bassa'</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span className="flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;strong className="mr-1"&gt;Creato da:&lt;/strong&gt; {ticket.autore}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span className="flex items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;strong className="mr-1"&gt;Data:&lt;/strong&gt; {new Date(ticket.dataCreazione).toLocaleDateString('it-IT', {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                          </span>day: '2-digit',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                          </span>month: 'long',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                          </span>year: 'numeric'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>})}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="flex space-x-2 ml-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                      </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setModalType('ticket');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setEditingItem(ticket);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>className="text-indigo-600 hover:text-indigo-800"</p>
<p class="p1"><span class="Apple-converted-space">                      </span>title="Modifica"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Edit2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                        </span>onClick={() =&gt; deleteTicket(ticket.id)}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>className="text-red-600 hover:text-red-800"</p>
<p class="p1"><span class="Apple-converted-space">                        </span>title="Elimina"</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;Trash2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>))</p>
<p class="p1"><span class="Apple-converted-space">          </span>)}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const AlertsView = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [filtroStato, setFiltroStato] = useState('tutti');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getPraticaNome = (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const pratica = pratiche.find(p =&gt; p.id === id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!pratica) return 'N/D';</p>
<p class="p1"><span class="Apple-converted-space">      </span>const cliente = clienti.find(c =&gt; c.id === pratica.clienteId);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const debitore = debitori.find(d =&gt; d.id === pratica.debitoreId);</p>
<p class="p1"><span class="Apple-converted-space">      </span>return `${cliente?.ragioneSociale || 'N/D'} vs ${debitore?.ragioneSociale || 'N/D'}`;</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getGiorniRimanenti = (dataScadenza) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const oggi = new Date();</p>
<p class="p1"><span class="Apple-converted-space">      </span>oggi.setHours(0, 0, 0, 0);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const scadenza = new Date(dataScadenza);</p>
<p class="p1"><span class="Apple-converted-space">      </span>scadenza.setHours(0, 0, 0, 0);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const diff = Math.ceil((scadenza - oggi) / (1000 * 60 * 60 * 24));</p>
<p class="p1"><span class="Apple-converted-space">      </span>return diff;</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const alertsFiltrati = alerts.filter(a =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (filtroStato === 'tutti') return true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>return a.stato === filtroStato;</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const alertsOrdinati = [...alertsFiltrati].sort((a, b) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>return new Date(a.dataScadenza) - new Date(b.dataScadenza);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="flex justify-between items-center mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;h1 className="text-3xl font-bold text-gray-900"&gt;Alert &amp; Scadenze&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">              </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>setModalType('alert');</p>
<p class="p1"><span class="Apple-converted-space">                </span>setEditingItem(null);</p>
<p class="p1"><span class="Apple-converted-space">                </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">              </span>}}</p>
<p class="p1"><span class="Apple-converted-space">              </span>className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">            </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;Plus size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;span&gt;Nuovo alert&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>)}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="flex space-x-2 mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; setFiltroStato('tutti')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className={`px-4 py-2 rounded-lg font-medium text-sm transition ${</p>
<p class="p1"><span class="Apple-converted-space">              </span>filtroStato === 'tutti'</p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Tutti ({alerts.length})</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; setFiltroStato('in_gestione')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className={`px-4 py-2 rounded-lg font-medium text-sm transition ${</p>
<p class="p1"><span class="Apple-converted-space">              </span>filtroStato === 'in_gestione'</p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>In gestione ({alerts.filter(a =&gt; a.stato === 'in_gestione').length})</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">            </span>onClick={() =&gt; setFiltroStato('chiuso')}</p>
<p class="p1"><span class="Apple-converted-space">            </span>className={`px-4 py-2 rounded-lg font-medium text-sm transition ${</p>
<p class="p1"><span class="Apple-converted-space">              </span>filtroStato === 'chiuso'</p>
<p class="p1"><span class="Apple-converted-space">                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">            </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Chiusi ({alerts.filter(a =&gt; a.stato === 'chiuso').length})</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="grid grid-cols-1 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>{alertsOrdinati.length === 0 ? (</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="bg-white rounded-lg shadow p-8 text-center text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;Bell className="mx-auto text-gray-400 mb-3" size={48} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;p className="text-lg mb-2"&gt;Nessun alert presente&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;p className="text-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>{currentUser?.tipo === 'studio'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                  </span>? 'Clicca su "Nuovo alert" per iniziare.'</p>
<p class="p1"><span class="Apple-converted-space">                  </span>: 'Non ci sono alert al momento.'</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">            </span>alertsOrdinati.map(alert =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">              </span>const giorniRimanenti = getGiorniRimanenti(alert.dataScadenza);</p>
<p class="p1"><span class="Apple-converted-space">              </span>const giorniPreavvisoNum = parseInt(alert.giorniPreavviso) || 7;</p>
<p class="p1"><span class="Apple-converted-space">              </span>const isScaduto = giorniRimanenti &lt; 0;</p>
<p class="p1"><span class="Apple-converted-space">              </span>const isImminente = giorniRimanenti &gt;= 0 &amp;&amp; giorniRimanenti &lt;= giorniPreavvisoNum;</p>
<p class="p1"><span class="Apple-converted-space">              </span>const isChiuso = alert.stato === 'chiuso';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">              </span>return (</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div</p>
<p class="p1"><span class="Apple-converted-space">                  </span>key={alert.id}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className={`bg-white rounded-lg shadow p-4 border-l-4 hover:shadow-lg transition ${</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isChiuso</p>
<p class="p1"><span class="Apple-converted-space">                      </span>? 'border-gray-400'</p>
<p class="p1"><span class="Apple-converted-space">                      </span>: isScaduto</p>
<p class="p1"><span class="Apple-converted-space">                      </span>? 'border-red-500 bg-red-50'</p>
<p class="p1"><span class="Apple-converted-space">                      </span>: isImminente</p>
<p class="p1"><span class="Apple-converted-space">                      </span>? 'border-orange-500 bg-orange-50'</p>
<p class="p1"><span class="Apple-converted-space">                      </span>: 'border-green-500'</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="flex items-start justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="flex-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex items-center space-x-3 mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;Bell<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                          </span>className={</p>
<p class="p1"><span class="Apple-converted-space">                            </span>isChiuso ? 'text-gray-400' : isScaduto ? 'text-red-600' : isImminente ? 'text-orange-600' : 'text-green-600'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                          </span>size={24}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 className="text-lg font-semibold text-gray-900"&gt;{alert.titolo}&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className={`px-2 py-1 text-xs font-semibold rounded-full ${</p>
<p class="p1"><span class="Apple-converted-space">                          </span>alert.stato === 'in_gestione'</p>
<p class="p1"><span class="Apple-converted-space">                            </span>? 'bg-blue-100 text-blue-800'</p>
<p class="p1"><span class="Apple-converted-space">                            </span>: 'bg-gray-100 text-gray-800'</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>{alert.stato === 'in_gestione' ? 'In gestione' : 'Chiuso'}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="space-y-1 text-sm text-gray-600 mb-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p&gt;&lt;strong&gt;Pratica:&lt;/strong&gt; {getPraticaNome(alert.praticaId)}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p&gt;&lt;strong&gt;Scadenza:&lt;/strong&gt; {new Date(alert.dataScadenza).toLocaleDateString('it-IT', { day: '2-digit', month: 'long', year: 'numeric' })}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p&gt;&lt;strong&gt;Preavviso:&lt;/strong&gt; {alert.giorniPreavviso || '7'} giorni&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{!isChiuso &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;p className={`font-semibold ${isScaduto ? 'text-red-600' : isImminente ? 'text-orange-600' : 'text-green-600'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{isScaduto<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                              </span>? `Scaduto da ${Math.abs(giorniRimanenti)} ${Math.abs(giorniRimanenti) === 1 ? 'giorno' : 'giorni'}`</p>
<p class="p1"><span class="Apple-converted-space">                              </span>: giorniRimanenti === 0</p>
<p class="p1"><span class="Apple-converted-space">                              </span>? 'Scade oggi'</p>
<p class="p1"><span class="Apple-converted-space">                              </span>: `Mancano ${giorniRimanenti} ${giorniRimanenti === 1 ? 'giorno' : 'giorni'}`</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                      </span>{alert.note &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p className="text-sm text-gray-700 bg-gray-50 p-2 rounded"&gt;{alert.note}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                    </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex space-x-2 ml-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                          </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setModalType('alert');</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setEditingItem(alert);</p>
<p class="p1"><span class="Apple-converted-space">                            </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">                          </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>className="text-indigo-600 hover:text-indigo-800"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>title="Modifica"</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;Edit2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                          </span>onClick={() =&gt; deleteAlert(alert.id)}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>className="text-red-600 hover:text-red-800"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>title="Elimina"</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;Trash2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>);</p>
<p class="p1"><span class="Apple-converted-space">            </span>})</p>
<p class="p1"><span class="Apple-converted-space">          </span>)}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const DettaglioPraticaView = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [activeTab, setActiveTab] = useState('info');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [showFaseModal, setShowFaseModal] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [nuovaFaseData, setNuovaFaseData] = useState({ fase: '', note: '' });</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [showDocumentoModal, setShowDocumentoModal] = useState(false);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [cartellaSelezionata, setCartellaSelezionata] = useState('Tutti');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [nuovoDocumento, setNuovoDocumento] = useState({ nome: '', cartella: 'Cliente' });</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [nuovoMessaggio, setNuovoMessaggio] = useState('');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const chatEndRef = useRef(null);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (!selectedPratica) return null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const scrollToBottom = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>useEffect(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (activeTab === 'chat') {</p>
<p class="p1"><span class="Apple-converted-space">        </span>scrollToBottom();</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}, [activeTab, selectedPratica.messaggi]);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const inviaMessaggio = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!nuovoMessaggio.trim()) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const messaggio = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: Date.now().toString(),</p>
<p class="p1"><span class="Apple-converted-space">        </span>testo: nuovoMessaggio,</p>
<p class="p1"><span class="Apple-converted-space">        </span>autore: currentUser?.nome,</p>
<p class="p1"><span class="Apple-converted-space">        </span>autoreTipo: currentUser?.tipo,</p>
<p class="p1"><span class="Apple-converted-space">        </span>data: new Date().toISOString()</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const praticaAggiornata = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>...selectedPratica,</p>
<p class="p1"><span class="Apple-converted-space">        </span>messaggi: [...(selectedPratica.messaggi || []), messaggio]</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuovePratiche = pratiche.map(p =&gt; p.id === selectedPratica.id ? praticaAggiornata : p);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setPratiche(nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('pratiche', nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setSelectedPratica(praticaAggiornata);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setNuovoMessaggio('');</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const cartelle = ['Tutti', 'Cliente', 'Stragiudiziale', 'Ingiunzione', 'Esecuzione', 'Pagamenti', 'Altro'];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const aggiungiDocumento = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!nuovoDocumento.nome) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert('Inserisci il nome del documento');</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const documento = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: Date.now().toString(),</p>
<p class="p1"><span class="Apple-converted-space">        </span>nome: nuovoDocumento.nome,</p>
<p class="p1"><span class="Apple-converted-space">        </span>cartella: nuovoDocumento.cartella,</p>
<p class="p1"><span class="Apple-converted-space">        </span>data: new Date().toISOString(),</p>
<p class="p1"><span class="Apple-converted-space">        </span>utente: currentUser?.nome</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const praticaAggiornata = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>...selectedPratica,</p>
<p class="p1"><span class="Apple-converted-space">        </span>documenti: [...(selectedPratica.documenti || []), documento]</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuovePratiche = pratiche.map(p =&gt; p.id === selectedPratica.id ? praticaAggiornata : p);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setPratiche(nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('pratiche', nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setSelectedPratica(praticaAggiornata);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setShowDocumentoModal(false);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setNuovoDocumento({ nome: '', cartella: 'Contratti' });</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const eliminaDocumento = async (docId) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!confirm('Sei sicuro di voler eliminare questo documento?')) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const praticaAggiornata = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>...selectedPratica,</p>
<p class="p1"><span class="Apple-converted-space">        </span>documenti: (selectedPratica.documenti || []).filter(d =&gt; d.id !== docId)</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuovePratiche = pratiche.map(p =&gt; p.id === selectedPratica.id ? praticaAggiornata : p);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setPratiche(nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('pratiche', nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setSelectedPratica(praticaAggiornata);</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const fasi = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Analisi preliminare',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Sollecito bonario',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Messa in mora',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Decreto ingiuntivo',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Notifica decreto',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Opposizione',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Esecuzione forzata',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Pignoramento',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Vendita beni',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Assegnazione/distribuzione',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Accordo transattivo',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Piano di rientro',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Monitoraggio pagamenti',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Chiusura positiva',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Chiusura negativa'</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const aggiornaFase = async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!nuovaFaseData.fase) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>alert('Seleziona una fase');</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const evento = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>id: Date.now().toString(),</p>
<p class="p1"><span class="Apple-converted-space">        </span>fase: nuovaFaseData.fase,</p>
<p class="p1"><span class="Apple-converted-space">        </span>note: nuovaFaseData.note || '',</p>
<p class="p1"><span class="Apple-converted-space">        </span>data: new Date().toISOString(),</p>
<p class="p1"><span class="Apple-converted-space">        </span>utente: currentUser?.nome</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const praticaAggiornata = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>...selectedPratica,</p>
<p class="p1"><span class="Apple-converted-space">        </span>fase: nuovaFaseData.fase,</p>
<p class="p1"><span class="Apple-converted-space">        </span>storico: [...(selectedPratica.storico || []), evento],</p>
<p class="p1"><span class="Apple-converted-space">        </span>aperta: nuovaFaseData.fase === 'Chiusura positiva' || nuovaFaseData.fase === 'Chiusura negativa' ? false : true,</p>
<p class="p1"><span class="Apple-converted-space">        </span>esito: nuovaFaseData.fase === 'Chiusura positiva' ? 'positivo' : nuovaFaseData.fase === 'Chiusura negativa' ? 'negativo' : selectedPratica.esito</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const nuovePratiche = pratiche.map(p =&gt; p.id === selectedPratica.id ? praticaAggiornata : p);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setPratiche(nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>await saveData('pratiche', nuovePratiche);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setSelectedPratica(praticaAggiornata);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setShowFaseModal(false);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setNuovaFaseData({ fase: '', note: '' });</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getClienteNome = (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const cliente = clienti.find(c =&gt; c.id === id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>return cliente ? cliente.ragioneSociale : 'N/D';</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const getDebitoreNome = (id) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const debitore = debitori.find(d =&gt; d.id === id);</p>
<p class="p1"><span class="Apple-converted-space">      </span>return debitore ? debitore.ragioneSociale : 'N/D';</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const tabs = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ id: 'info', label: 'Informazioni' },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ id: 'fasi', label: 'Gestione fasi' },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ id: 'documenti', label: 'Documenti' },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ id: 'storico', label: 'Storico' },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ id: 'chat', label: 'Chat' }</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="flex items-center justify-between mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">              </span>onClick={() =&gt; setSelectedPratica(null)}</p>
<p class="p1"><span class="Apple-converted-space">              </span>className="text-indigo-600 hover:text-indigo-800 mb-2 flex items-center"</p>
<p class="p1"><span class="Apple-converted-space">            </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;ChevronRight size={20} className="transform rotate-180" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;span&gt;Torna alla lista&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h1 className="text-3xl font-bold text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>Pratica: {getClienteNome(selectedPratica.clienteId)} vs {getDebitoreNome(selectedPratica.debitoreId)}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;span className={`px-3 py-1 text-sm font-semibold rounded-full ${</p>
<p class="p1"><span class="Apple-converted-space">            </span>selectedPratica.aperta<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">              </span>? 'bg-blue-100 text-blue-800'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">              </span>: selectedPratica.esito === 'positivo'</p>
<p class="p1"><span class="Apple-converted-space">              </span>? 'bg-green-100 text-green-800'</p>
<p class="p1"><span class="Apple-converted-space">              </span>: 'bg-red-100 text-red-800'</p>
<p class="p1"><span class="Apple-converted-space">          </span>}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{selectedPratica.aperta ? 'Aperta' : selectedPratica.esito === 'positivo' ? 'Chiusa positiva' : 'Chiusa negativa'}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="bg-white rounded-lg shadow"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="border-b"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;nav className="flex"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>{tabs.map(tab =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                  </span>key={tab.id}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>onClick={() =&gt; setActiveTab(tab.id)}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>className={`px-6 py-4 font-medium text-sm border-b-2 transition ${</p>
<p class="p1"><span class="Apple-converted-space">                    </span>activeTab === tab.id</p>
<p class="p1"><span class="Apple-converted-space">                      </span>? 'border-indigo-600 text-indigo-600'</p>
<p class="p1"><span class="Apple-converted-space">                      </span>: 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'</p>
<p class="p1"><span class="Apple-converted-space">                  </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>{tab.label}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>))}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/nav&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{activeTab === 'info' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="grid grid-cols-1 lg:grid-cols-2 gap-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="bg-gray-50 rounded-lg p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-3"&gt;Informazioni generali&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="space-y-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Cliente:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-gray-900"&gt;{getClienteNome(selectedPratica.clienteId)}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Debitore:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-gray-900"&gt;{getDebitoreNome(selectedPratica.debitoreId)}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Data affidamento:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>{selectedPratica.dataAffidamento ? new Date(selectedPratica.dataAffidamento).toLocaleDateString('it-IT') : 'N/D'}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Fase attuale:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-indigo-600"&gt;{selectedPratica.fase}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Stato:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className={`font-medium ${selectedPratica.aperta ? 'text-blue-600' : 'text-gray-900'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>{selectedPratica.aperta ? 'In corso' : selectedPratica.esito === 'positivo' ? 'Chiusa - Esito positivo' : 'Chiusa - Esito negativo'}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="bg-gray-50 rounded-lg p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-3"&gt;Riepilogo finanziario&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="space-y-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Capitale:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>€ {parseFloat(selectedPratica.capitale || 0).toLocaleString('it-IT', {minimumFractionDigits: 2})}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Capitale recuperato:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-green-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>€ {parseFloat(selectedPratica.importoRecuperatoCapitale || 0).toLocaleString('it-IT', {minimumFractionDigits: 2})}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between border-t pt-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Anticipazioni:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>€ {parseFloat(selectedPratica.anticipazioni || 0).toLocaleString('it-IT', {minimumFractionDigits: 2})}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Anticipazioni recuperate:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-green-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>€ {parseFloat(selectedPratica.importoRecuperatoAnticipazioni || 0).toLocaleString('it-IT', {minimumFractionDigits: 2})}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between border-t pt-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Compensi legali maturati:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-gray-900"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>€ {parseFloat(selectedPratica.compensiLegali || 0).toLocaleString('it-IT', {minimumFractionDigits: 2})}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="flex justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="text-gray-600"&gt;Compensi liquidati:&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="font-medium text-green-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>€ {parseFloat(selectedPratica.compensiLiquidati || 0).toLocaleString('it-IT', {minimumFractionDigits: 2})}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>{selectedPratica.note &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="bg-gray-50 rounded-lg p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-3"&gt;Note&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p className="text-gray-700 whitespace-pre-wrap"&gt;{selectedPratica.note}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="flex justify-end"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                      </span>onClick={() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setModalType('pratica');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setEditingItem(selectedPratica);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>setShowModal(true);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Edit2 size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span&gt;Modifica pratica&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>)}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">            </span>{activeTab === 'fasi' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="bg-indigo-50 border border-indigo-200 rounded-lg p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="flex items-center justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;h3 className="text-lg font-semibold text-indigo-900"&gt;Fase attuale&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;p className="text-2xl font-bold text-indigo-600 mt-1"&gt;{selectedPratica.fase}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{currentUser?.tipo === 'studio' &amp;&amp; selectedPratica.aperta &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                        </span>onClick={() =&gt; setShowFaseModal(true)}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition"</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>Cambia fase</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-4"&gt;Tutte le fasi del processo&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{fasi.map((fase, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                      </span>const isFaseCorrente = fase === selectedPratica.fase;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>const faseCompletata = selectedPratica.storico?.some(s =&gt; s.fase === fase);</p>
<p class="p2"><span class="Apple-converted-space">                      </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>return (</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div</p>
<p class="p1"><span class="Apple-converted-space">                          </span>key={fase}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>className={`p-3 rounded-lg border-2 ${</p>
<p class="p1"><span class="Apple-converted-space">                            </span>isFaseCorrente</p>
<p class="p1"><span class="Apple-converted-space">                              </span>? 'border-indigo-500 bg-indigo-50'</p>
<p class="p1"><span class="Apple-converted-space">                              </span>: faseCompletata</p>
<p class="p1"><span class="Apple-converted-space">                              </span>? 'border-green-300 bg-green-50'</p>
<p class="p1"><span class="Apple-converted-space">                              </span>: 'border-gray-200 bg-white'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;div className="flex items-center space-x-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;span className={`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${</p>
<p class="p1"><span class="Apple-converted-space">                              </span>isFaseCorrente</p>
<p class="p1"><span class="Apple-converted-space">                                </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                                </span>: faseCompletata</p>
<p class="p1"><span class="Apple-converted-space">                                </span>? 'bg-green-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                                </span>: 'bg-gray-300 text-gray-600'</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>{index + 1}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;span className={`text-sm font-medium ${</p>
<p class="p1"><span class="Apple-converted-space">                              </span>isFaseCorrente ? 'text-indigo-900' : faseCompletata ? 'text-green-900' : 'text-gray-600'</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>{fase}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>})}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>{showFaseModal &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="bg-white rounded-lg shadow-xl max-w-lg w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="p-6 border-b flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h2 className="text-2xl font-bold text-gray-900"&gt;Cambia fase&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button onClick={() =&gt; setShowFaseModal(false)} className="text-gray-400 hover:text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;X size={24} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="p-6 space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Nuova fase *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                            </span>value={nuovaFaseData.fase}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onChange={(e) =&gt; setNuovaFaseData({...nuovaFaseData, fase: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option value=""&gt;Seleziona fase&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{fasi.map(fase =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;option key={fase} value={fase}&gt;{fase}&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Note&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;textarea</p>
<p class="p1"><span class="Apple-converted-space">                            </span>value={nuovaFaseData.note}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onChange={(e) =&gt; setNuovaFaseData({...nuovaFaseData, note: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>rows="4"</p>
<p class="p1"><span class="Apple-converted-space">                            </span>placeholder="Aggiungi eventuali note sul cambio fase..."</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div className="flex space-x-3 pt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onClick={aggiornaFase}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className="flex-1 bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>Salva</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onClick={() =&gt; setShowFaseModal(false)}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-400 transition"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>Annulla</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>)}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">            </span>{activeTab === 'documenti' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex items-center justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;h3 className="text-lg font-semibold text-gray-900"&gt;Documenti della pratica&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                      </span>onClick={() =&gt; setShowDocumentoModal(true)}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>className="bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition flex items-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Plus size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span&gt;Carica documento&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex space-x-2 overflow-x-auto pb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>{cartelle.map(cartella =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                      </span>key={cartella}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>onClick={() =&gt; setCartellaSelezionata(cartella)}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>className={`px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition ${</p>
<p class="p1"><span class="Apple-converted-space">                        </span>cartellaSelezionata === cartella</p>
<p class="p1"><span class="Apple-converted-space">                          </span>? 'bg-indigo-600 text-white'</p>
<p class="p1"><span class="Apple-converted-space">                          </span>: 'bg-gray-100 text-gray-700 hover:bg-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">                      </span>}`}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>{cartella}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>{cartella !== 'Tutti' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="ml-2 text-xs"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>({(selectedPratica.documenti || []).filter(d =&gt; d.cartella === cartella).length})</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>{cartella === 'Tutti' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span className="ml-2 text-xs"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>({(selectedPratica.documenti || []).length})</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="bg-white rounded-lg border border-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>{(!selectedPratica.documenti || selectedPratica.documenti.length === 0) ? (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="text-center py-12"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Folder className="mx-auto text-gray-400 mb-3" size={48} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;p className="text-gray-500"&gt;Nessun documento caricato&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="divide-y divide-gray-200"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>{(selectedPratica.documenti || [])</p>
<p class="p1"><span class="Apple-converted-space">                        </span>.filter(doc =&gt; cartellaSelezionata === 'Tutti' || doc.cartella === cartellaSelezionata)</p>
<p class="p1"><span class="Apple-converted-space">                        </span>.map(doc =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;div key={doc.id} className="p-4 hover:bg-gray-50 transition"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div className="flex items-center justify-between"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;div className="flex items-center space-x-3 flex-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="flex-shrink-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>&lt;Folder className="text-indigo-600" size={24} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;div className="flex-1 min-w-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>&lt;h4 className="font-medium text-gray-900 truncate"&gt;{doc.nome}&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>&lt;div className="flex items-center space-x-3 text-sm text-gray-500 mt-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;span&gt;{doc.cartella}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;span&gt;•&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;span&gt;{new Date(doc.data).toLocaleDateString('it-IT')}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;span&gt;•&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>&lt;span&gt;{doc.utente}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>{currentUser?.tipo === 'studio' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>onClick={() =&gt; eliminaDocumento(doc.id)}</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>className="ml-4 text-red-600 hover:text-red-800"</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>title="Elimina documento"</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>&lt;Trash2 size={18} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>{showDocumentoModal &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="bg-white rounded-lg shadow-xl max-w-lg w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="p-6 border-b flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h2 className="text-2xl font-bold text-gray-900"&gt;Carica documento&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button onClick={() =&gt; setShowDocumentoModal(false)} className="text-gray-400 hover:text-gray-600"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;X size={24} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div className="p-6 space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Nome documento *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                            </span>type="text"</p>
<p class="p1"><span class="Apple-converted-space">                            </span>value={nuovoDocumento.nome}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onChange={(e) =&gt; setNuovoDocumento({...nuovoDocumento, nome: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>placeholder="es. Contratto recupero credito.pdf"</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;label className="block text-sm font-medium text-gray-700 mb-1"&gt;Cartella *&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">                            </span>value={nuovoDocumento.cartella}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onChange={(e) =&gt; setNuovoDocumento({...nuovoDocumento, cartella: e.target.value})}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{cartelle.filter(c =&gt; c !== 'Tutti').map(cartella =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;option key={cartella} value={cartella}&gt;{cartella}&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div className="bg-blue-50 border border-blue-200 rounded-lg p-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;p className="text-sm text-blue-800"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;strong&gt;Nota:&lt;/strong&gt; Questo è un sistema dimostrativo. In produzione, qui ci sarebbe il caricamento reale dei file.</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div className="flex space-x-3 pt-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onClick={aggiungiDocumento}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className="flex-1 bg-indigo-600 text-white py-2 rounded-lg font-semibold hover:bg-indigo-700 transition"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>Carica</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                            </span>onClick={() =&gt; setShowDocumentoModal(false)}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>className="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-400 transition"</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>Annulla</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>)}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">            </span>{activeTab === 'storico' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex items-center justify-between mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;h3 className="text-lg font-semibold text-gray-900"&gt;Storico eventi&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span className="text-sm text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{(selectedPratica.storico || []).length} {(selectedPratica.storico || []).length === 1 ? 'evento' : 'eventi'}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>{(!selectedPratica.storico || selectedPratica.storico.length === 0) ? (</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="text-center py-12 bg-gray-50 rounded-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;Calendar className="mx-auto text-gray-400 mb-3" size={48} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p className="text-gray-500"&gt;Nessun evento registrato&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{[...selectedPratica.storico].reverse().map((evento, index) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div key={evento.id} className="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div className="flex items-start justify-between mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;div className="flex items-center space-x-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div className="flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;Calendar className="text-indigo-600" size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;h4 className="font-semibold text-gray-900"&gt;{evento.fase}&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;p className="text-sm text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>{new Date(evento.data).toLocaleDateString('it-IT', {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                  </span>day: '2-digit',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                  </span>month: 'long',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                  </span>year: 'numeric',</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>hour: '2-digit',</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>minute: '2-digit'</p>
<p class="p1"><span class="Apple-converted-space">                                </span>})}</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;span className="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{evento.utente}</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{evento.note &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;div className="mt-3 pl-13 text-sm text-gray-700 bg-gray-50 p-3 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;p className="whitespace-pre-wrap"&gt;{evento.note}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>)}</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">            </span>{activeTab === 'chat' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex flex-col h-[600px]"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>{(!selectedPratica.messaggi || selectedPratica.messaggi.length === 0) ? (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div className="text-center py-12"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;MessageSquare className="mx-auto text-gray-400 mb-3" size={48} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;p className="text-gray-500"&gt;Nessun messaggio. Inizia la conversazione!&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>{selectedPratica.messaggi.map((msg) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const isStudio = msg.autoreTipo === 'studio';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return (</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;div key={msg.id} className={`flex ${isStudio ? 'justify-end' : 'justify-start'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div className={`max-w-[70%] ${isStudio ? 'order-2' : 'order-1'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;div className={`rounded-lg p-3 ${</p>
<p class="p1"><span class="Apple-converted-space">                                </span>isStudio<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                  </span>? 'bg-indigo-600 text-white'<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                  </span>: 'bg-white text-gray-900 border border-gray-200'</p>
<p class="p1"><span class="Apple-converted-space">                              </span>}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p className="text-sm font-medium mb-1"&gt;{msg.autore}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p className="whitespace-pre-wrap"&gt;{msg.testo}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;p className={`text-xs mt-2 ${isStudio ? 'text-indigo-200' : 'text-gray-500'}`}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>{new Date(msg.data).toLocaleDateString('it-IT', {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                    </span>day: '2-digit',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                    </span>month: 'short',</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>hour: '2-digit',</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>minute: '2-digit'</p>
<p class="p1"><span class="Apple-converted-space">                                  </span>})}</p>
<p class="p1"><span class="Apple-converted-space">                                </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>})}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div ref={chatEndRef} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>)}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="border-t bg-white p-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div className="flex space-x-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;textarea</p>
<p class="p1"><span class="Apple-converted-space">                      </span>value={nuovoMessaggio}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>onChange={(e) =&gt; setNuovoMessaggio(e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>onKeyDown={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (e.key === 'Enter' &amp;&amp; !e.shiftKey) {</p>
<p class="p1"><span class="Apple-converted-space">                          </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">                          </span>inviaMessaggio();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>}}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>placeholder="Scrivi un messaggio..."</p>
<p class="p1"><span class="Apple-converted-space">                      </span>rows="3"</p>
<p class="p1"><span class="Apple-converted-space">                      </span>className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button</p>
<p class="p1"><span class="Apple-converted-space">                      </span>onClick={inviaMessaggio}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>disabled={!nuovoMessaggio.trim()}</p>
<p class="p1"><span class="Apple-converted-space">                      </span>className="px-6 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;MessageSquare size={20} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span&gt;Invia&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;p className="text-xs text-gray-500 mt-2"&gt;Premi Invio per inviare, Shift+Invio per andare a capo&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const StatisticheView = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [periodoSelezionato, setPeriodoSelezionato] = useState('tutto');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [dataDa, setDataDa] = useState('');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const [dataA, setDataA] = useState('');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const filtraPratichePerPeriodo = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>let dataInizio, dataFine;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const oggi = new Date();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>switch(periodoSelezionato) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'mese':</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataInizio = new Date(oggi.getFullYear(), oggi.getMonth() - 1, oggi.getDate());</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataFine = oggi;</p>
<p class="p1"><span class="Apple-converted-space">          </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'trimestre':</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataInizio = new Date(oggi.getFullYear(), oggi.getMonth() - 3, oggi.getDate());</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataFine = oggi;</p>
<p class="p1"><span class="Apple-converted-space">          </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'semestre':</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataInizio = new Date(oggi.getFullYear(), oggi.getMonth() - 6, oggi.getDate());</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataFine = oggi;</p>
<p class="p1"><span class="Apple-converted-space">          </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'anno':</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataInizio = new Date(oggi.getFullYear(), 0, 1);</p>
<p class="p1"><span class="Apple-converted-space">          </span>dataFine = oggi;</p>
<p class="p1"><span class="Apple-converted-space">          </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>case 'personalizzato':</p>
<p class="p1"><span class="Apple-converted-space">          </span>if (dataDa &amp;&amp; dataA) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>dataInizio = new Date(dataDa);</p>
<p class="p1"><span class="Apple-converted-space">            </span>dataFine = new Date(dataA);</p>
<p class="p1"><span class="Apple-converted-space">          </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">            </span>return pratiche;</p>
<p class="p1"><span class="Apple-converted-space">          </span>}</p>
<p class="p1"><span class="Apple-converted-space">          </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>default:</p>
<p class="p1"><span class="Apple-converted-space">          </span>return pratiche;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>return pratiche.filter(p =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const dataPratica = new Date(p.dataCreazione || p.dataAffidamento);</p>
<p class="p1"><span class="Apple-converted-space">        </span>return dataPratica &gt;= dataInizio &amp;&amp; dataPratica &lt;= dataFine;</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheFiltrate = filtraPratichePerPeriodo();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Dati per grafico 1: Distribuzione pratiche per stato</p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheAperte = praticheFiltrate.filter(p =&gt; p.aperta).length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheChiuse = praticheFiltrate.filter(p =&gt; !p.aperta).length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const datiStato = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ name: 'Aperte', value: praticheAperte, color: '#3b82f6' },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ name: 'Chiuse', value: praticheChiuse, color: '#10b981' }</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Dati per grafico 2: Esiti pratiche chiuse</p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheChiusePositive = praticheFiltrate.filter(p =&gt; !p.aperta &amp;&amp; p.esito === 'positivo').length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const praticheChiuseNegative = praticheFiltrate.filter(p =&gt; !p.aperta &amp;&amp; p.esito === 'negativo').length;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const datiEsiti = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ name: 'Esito positivo', value: praticheChiusePositive, color: '#10b981' },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ name: 'Esito negativo', value: praticheChiuseNegative, color: '#ef4444' }</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Dati per grafico 3: Andamento finanziario</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleCapitale = praticheFiltrate.reduce((acc, p) =&gt; acc + (parseFloat(p.capitale) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleRecuperatoCapitale = praticheFiltrate.reduce((acc, p) =&gt; acc + (parseFloat(p.importoRecuperatoCapitale) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleAnticipazioni = praticheFiltrate.reduce((acc, p) =&gt; acc + (parseFloat(p.anticipazioni) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleRecuperatoAnticipazioni = praticheFiltrate.reduce((acc, p) =&gt; acc + (parseFloat(p.importoRecuperatoAnticipazioni) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const datiFinanziari = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ categoria: 'Capitale', Affidato: Math.round(totaleCapitale), Recuperato: Math.round(totaleRecuperatoCapitale) },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ categoria: 'Anticipazioni', Affidato: Math.round(totaleAnticipazioni), Recuperato: Math.round(totaleRecuperatoAnticipazioni) }</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Dati per grafico 4: Pratiche per fase</p>
<p class="p1"><span class="Apple-converted-space">    </span>const fasi = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Analisi preliminare',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Sollecito bonario',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Messa in mora',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Decreto ingiuntivo',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Notifica decreto',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Opposizione',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Esecuzione forzata',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Pignoramento',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Vendita beni',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Assegnazione/distribuzione',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Accordo transattivo',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Piano di rientro',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Monitoraggio pagamenti',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Chiusura positiva',</p>
<p class="p1"><span class="Apple-converted-space">      </span>'Chiusura negativa'</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p1"><span class="Apple-converted-space">    </span>const datiFasi = fasi.map(fase =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">      </span>fase: fase.length &gt; 20 ? fase.substring(0, 17) + '...' : fase,</p>
<p class="p1"><span class="Apple-converted-space">      </span>count: praticheFiltrate.filter(p =&gt; p.fase === fase).length</p>
<p class="p1"><span class="Apple-converted-space">    </span>})).filter(d =&gt; d.count &gt; 0);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Dati per grafico 5: Compensi maturati vs liquidati</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleCompensiMaturati = praticheFiltrate.reduce((acc, p) =&gt; acc + (parseFloat(p.compensiLegali) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const totaleCompensiLiquidati = praticheFiltrate.reduce((acc, p) =&gt; acc + (parseFloat(p.compensiLiquidati) || 0), 0);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const datiCompensi = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ tipo: 'Maturati', importo: Math.round(totaleCompensiMaturati) },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ tipo: 'Liquidati', importo: Math.round(totaleCompensiLiquidati) }</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>return (</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="flex justify-between items-center mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;h1 className="text-3xl font-bold text-gray-900"&gt;Statistiche&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="flex items-center space-x-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;select</p>
<p class="p1"><span class="Apple-converted-space">              </span>value={periodoSelezionato}</p>
<p class="p1"><span class="Apple-converted-space">              </span>onChange={(e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>setPeriodoSelezionato(e.target.value);</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (e.target.value !== 'personalizzato') {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setDataDa('');</p>
<p class="p1"><span class="Apple-converted-space">                  </span>setDataA('');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">              </span>}}</p>
<p class="p1"><span class="Apple-converted-space">              </span>className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">            </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="tutto"&gt;Tutto il periodo&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="anno"&gt;Quest'anno&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="semestre"&gt;Ultimi 6 mesi&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="trimestre"&gt;Ultimi 3 mesi&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="mese"&gt;Ultimo mese&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="personalizzato"&gt;Periodo personalizzato&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/select&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>{periodoSelezionato === 'personalizzato' &amp;&amp; (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex items-center space-x-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="text-sm font-medium text-gray-700"&gt;Da:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="date"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={dataDa}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setDataDa(e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div className="flex items-center space-x-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label className="text-sm font-medium text-gray-700"&gt;A:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;input</p>
<p class="p1"><span class="Apple-converted-space">                    </span>type="date"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>value={dataA}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>onChange={(e) =&gt; setDataA(e.target.value)}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>min={dataDa}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-4"&gt;Distribuzione pratiche per stato&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{datiStato.some(d =&gt; d.value &gt; 0) ? (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;ResponsiveContainer width="100%" height={250}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;PieChart&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;Pie</p>
<p class="p1"><span class="Apple-converted-space">                    </span>data={datiStato}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>cx="50%"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>cy="50%"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>labelLine={false}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>label={({ name, value, percent }) =&gt; `${name}: ${value} (${(percent * 100).toFixed(0)}%)`}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>outerRadius={80}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>fill="#8884d8"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>dataKey="value"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{datiStato.map((entry, index) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Cell key={`cell-${index}`} fill={entry.color} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/Pie&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;Tooltip /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/PieChart&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/ResponsiveContainer&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex items-center justify-center h-64 bg-gray-50 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-gray-500"&gt;Nessuna pratica nel periodo selezionato&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-4"&gt;Esiti pratiche chiuse&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{datiEsiti.some(d =&gt; d.value &gt; 0) ? (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;ResponsiveContainer width="100%" height={250}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;PieChart&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;Pie</p>
<p class="p1"><span class="Apple-converted-space">                    </span>data={datiEsiti}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>cx="50%"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>cy="50%"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>labelLine={false}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>label={({ name, value, percent }) =&gt; `${name}: ${value} (${(percent * 100).toFixed(0)}%)`}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>outerRadius={80}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>fill="#8884d8"</p>
<p class="p1"><span class="Apple-converted-space">                    </span>dataKey="value"</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{datiEsiti.map((entry, index) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Cell key={`cell-${index}`} fill={entry.color} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/Pie&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;Tooltip /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/PieChart&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/ResponsiveContainer&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex items-center justify-center h-64 bg-gray-50 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-gray-500"&gt;Nessuna pratica chiusa nel periodo selezionato&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="bg-white rounded-lg shadow p-6 mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-4"&gt;Andamento finanziario&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>{datiFinanziari.some(d =&gt; d.Affidato &gt; 0 || d.Recuperato &gt; 0) ? (</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;ResponsiveContainer width="100%" height={300}&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;BarChart data={datiFinanziari}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;CartesianGrid strokeDasharray="3 3" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;XAxis dataKey="categoria" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;YAxis tickFormatter={(value) =&gt; `€${(value / 1000).toFixed(0)}k`} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Tooltip formatter={(value) =&gt; `€${value.toLocaleString('it-IT')}`} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Legend /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Bar dataKey="Affidato" fill="#3b82f6" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;Bar dataKey="Recuperato" fill="#10b981" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/BarChart&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/ResponsiveContainer&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div className="flex items-center justify-center h-80 bg-gray-50 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;p className="text-gray-500"&gt;Nessun dato finanziario nel periodo selezionato&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>)}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-4"&gt;Pratiche per fase&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{datiFasi.length &gt; 0 ? (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;ResponsiveContainer width="100%" height={250}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;BarChart data={datiFasi} layout="vertical"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;CartesianGrid strokeDasharray="3 3" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;XAxis type="number" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;YAxis dataKey="fase" type="category" width={120} style={{ fontSize: '12px' }} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;Tooltip /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;Bar dataKey="count" fill="#8b5cf6" name="Pratiche" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/BarChart&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/ResponsiveContainer&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex items-center justify-center h-64 bg-gray-50 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-gray-500"&gt;Nessuna pratica nel periodo selezionato&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div className="bg-white rounded-lg shadow p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 className="text-lg font-semibold text-gray-900 mb-4"&gt;Compensi maturati vs liquidati&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>{datiCompensi.some(d =&gt; d.importo &gt; 0) ? (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;ResponsiveContainer width="100%" height={250}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;BarChart data={datiCompensi}&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;CartesianGrid strokeDasharray="3 3" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;XAxis dataKey="tipo" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;YAxis tickFormatter={(value) =&gt; `€${(value / 1000).toFixed(0)}k`} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;Tooltip formatter={(value) =&gt; `€${value.toLocaleString('it-IT')}`} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;Bar dataKey="importo" fill="#f59e0b"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>{datiCompensi.map((entry, index) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;Cell key={`cell-${index}`} fill={index === 0 ? '#3b82f6' : '#10b981'} /&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>))}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/Bar&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/BarChart&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/ResponsiveContainer&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>) : (</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div className="flex items-center justify-center h-64 bg-gray-50 rounded"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p className="text-gray-500"&gt;Nessun dato sui compensi nel periodo selezionato&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>)}</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const PlaceholderView = ({ title }) =&gt; (</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div className="p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;h1 className="text-3xl font-bold text-gray-900 mb-6"&gt;{title}&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="bg-white rounded-lg shadow p-8 text-center text-gray-500"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;p className="text-lg mb-2"&gt;Funzionalità in sviluppo&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;p className="text-sm"&gt;Questa sezione sarà disponibile a breve.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>if (!currentUser) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>return &lt;LoginView /&gt;;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>return (</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div className="flex min-h-screen bg-gray-100"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;Sidebar /&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div className="flex-1 overflow-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'dashboard' &amp;&amp; &lt;Dashboard /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'clienti' &amp;&amp; &lt;ClientiView /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'debitori' &amp;&amp; &lt;DebitoriView /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'pratiche' &amp;&amp; !selectedPratica &amp;&amp; &lt;PraticheView /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'pratiche' &amp;&amp; selectedPratica &amp;&amp; &lt;DettaglioPraticaView /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'alerts' &amp;&amp; &lt;AlertsView /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'tickets' &amp;&amp; &lt;TicketsView /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'statistiche' &amp;&amp; &lt;StatisticheView /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">        </span>{currentView === 'ricerca' &amp;&amp; &lt;PlaceholderView title="Ricerca avanzata" /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>{showModal &amp;&amp; (modalType === 'cliente' || modalType === 'debitore') &amp;&amp; &lt;FormAnagraficaModal /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">      </span>{showModal &amp;&amp; modalType === 'pratica' &amp;&amp; &lt;FormPraticaModal /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">      </span>{showModal &amp;&amp; modalType === 'alert' &amp;&amp; &lt;FormAlertModal /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">      </span>{showModal &amp;&amp; modalType === 'ticket' &amp;&amp; &lt;FormTicketModal /&gt;}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>);</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">export default RecuperoCrediti;</p>
</body>
</html>
